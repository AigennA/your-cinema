<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Din Bio - Streama de senaste filmerna, serier och exklusivt inneh친ll. V칛lj ditt abonnemang idag.">

  <title>Din Bio</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="icon" href="images/favicon.png" type="image/png">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <!-- HEADER -->
  <header>
    <input type="checkbox" id="menu-toggle" aria-label="칐ppna menyn" />
    <label for="menu-toggle" class="mobile-menu" aria-label="Meny">
      <i class="fas fa-bars"></i>
    </label>

    <div class="logo">
      <a href="#hero">
        <img src="images/logobio.png" alt="Din Bio logotyp">
      </a>
    </div>

    <nav class="desktop-nav" aria-label="Huvudnavigering">
      <a href="#coming-soon">Kommer snart</a>

      <a href="#now-showing">Popul칛rt just nu</a>

      <a href="#now-showing">Nu p친 bio</a>

      <a href="#giftcards">Presentkort</a>
      <a href="#about">Om oss</a>
      <button class="recommend-btn" id="openRecommendBtn"><i class="fas fa-magic"></i> Vad ska jag se?</button>
      <button class="profile-nav-btn" id="openProfileBtn"><i class="fas fa-user-circle"></i> Min profil</button>
    </nav>

    <div class="search-box">
      <input type="text" id="movieSearchInput" placeholder="S칬k film..." aria-label="S칬k film">
      <button type="button" id="movieSearchBtn" aria-label="S칬k"><i class="fas fa-search"></i></button>
      <div class="search-results" id="searchResults"></div>
    </div>

    <button class="profile-btn" id="openProfileBtn" aria-label="Min profil">
      <i class="fas fa-user-circle"></i>
    </button>

    <nav class="mobile-nav" aria-label="Mobilnavigering">
      <div class="mobile-search-box">
        <input type="text" id="movieSearchInputMobile" placeholder="S칬k film..." aria-label="S칬k film">
        <button type="button" id="movieSearchBtnMobile" aria-label="S칬k"><i class="fas fa-search"></i></button>
      </div>
      <div class="mobile-search-results" id="searchResultsMobile"></div>
      <a href="#coming-soon">Kommer snart</a>

      <a href="#now-showing">Popul칛rt just nu</a>

      <a href="#now-showing">Nu p친 bio</a>

      <a href="#giftcards">Presentkort</a>
      <a href="#about">Om oss</a>
      <a href="#" id="openRecommendMobile" class="recommend-mobile-link"><i class="fas fa-magic"></i> Vad ska jag se?</a>
      <a href="#" id="openProfileMobile" class="profile-mobile-link"><i class="fas fa-user-circle"></i> Min profil</a>
    </nav>
  </header>

  <!-- HERO SECTION -->
  <section class="hero" id="hero">
    <img src="images/once-upon-a-time.png" alt="Filmaffisch f칬r Once Upon a Time in Hollywood">
    <div class="hero-text">
      <span class="hero-badge">Ny p친 Din Bio</span>
      <h1>Once Upon a Time in Hollywood</h1>
      <p class="hero-rating"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i> 8.5/10</p>
      <p class="hero-description">Quentin Tarantinos hyllade film om Hollywood 1969. En avtackande TV-stj칛rna och hans stuntdubblare navigerar en f칬r칛nderlig filmindustri.</p>
      <div class="hero-meta">
        <span><i class="fas fa-clock"></i> 2h 41min</span>
        <span><i class="fas fa-film"></i> Drama, Komedi</span>
        <span><i class="fas fa-user"></i> 15+</span>
      </div>
      <button class="hero-button" type="button" onclick="alert('Filmen spelas nu!')">
        <i class="fas fa-play"></i> Titta nu
      </button>
    </div>
  </section>

  <!-- CATEGORIES -->
  <section class="categories" id="categories">
    <div class="category-list">
      <button class="category-btn active" data-category="all"><i class="fas fa-film"></i> Alla</button>
      <button class="category-btn" data-category="action"><i class="fas fa-explosion"></i> Action</button>
      <button class="category-btn" data-category="drama"><i class="fas fa-theater-masks"></i> Drama</button>
      <button class="category-btn" data-category="comedy"><i class="fas fa-laugh"></i> Komedi</button>
      <button class="category-btn" data-category="horror"><i class="fas fa-ghost"></i> Skr칛ck</button>
      <button class="category-btn" data-category="family"><i class="fas fa-child"></i> Familj</button>
      <button class="category-btn" data-category="scifi"><i class="fas fa-rocket"></i> Sci-Fi</button>
    </div>
  </section>

  <!-- NOW SHOWING -->
  <section class="now-showing" id="now-showing">
    <div class="section-header">
      <h2><i class="fas fa-play-circle"></i> Popul칛rt just nu</h2>
      <p>Streama de b칛sta filmerna direkt</p>
    </div>

    <div class="movies-grid">
      <!-- Movie 1 -->
      <article class="movie-card" data-category="drama" id="movie-once-upon-a-time">
        <div class="movie-poster">
          <img src="images/once-upon-a-time.png" alt="Once Upon a Time in Hollywood">
          <div class="movie-overlay">
            <span class="age-rating">15+</span>
            <button class="play-trailer" aria-label="Spela trailer"><i class="fas fa-play"></i></button>
          </div>
        </div>
        <div class="movie-info">
          <h3>Once Upon a Time in Hollywood</h3>
          <p class="movie-genre"><i class="fas fa-film"></i> Drama, Komedi</p>
          <p class="movie-duration"><i class="fas fa-clock"></i> 2h 41min</p>
          <div class="movie-rating">
            <i class="fas fa-star"></i> 8.5/10
          </div>
          <div class="stream-actions">
            <button class="watch-btn" onclick="alert('Filmen spelas nu!')"><i class="fas fa-play"></i> Titta nu</button>
            <button class="watchlist-btn" onclick="toggleWatchlist(this)"><i class="far fa-bookmark"></i> Min lista</button>
          </div>
        </div>
      </article>

      <!-- Movie 2 -->
      <article class="movie-card" data-category="action" id="movie-tenet">
        <div class="movie-poster">
          <img src="images/tenet.jpg" alt="Tenet">
          <div class="movie-overlay">
            <span class="age-rating">15+</span>
            <button class="play-trailer" type="button" aria-label="Spela trailer"><i class="fas fa-play"></i></button>
          </div>
        </div>
        <div class="movie-info">
          <h3>Tenet</h3>
          <p class="movie-genre"><i class="fas fa-film"></i> Action, Sci-Fi</p>
          <p class="movie-duration"><i class="fas fa-clock"></i> 2h 30min</p>
          <div class="movie-rating">
            <i class="fas fa-star"></i> 7.8/10
          </div>
          <div class="stream-actions">
            <button class="watch-btn" onclick="alert('Filmen spelas nu!')"><i class="fas fa-play"></i> Titta nu</button>
            <button class="watchlist-btn" onclick="toggleWatchlist(this)"><i class="far fa-bookmark"></i> Min lista</button>
          </div>
        </div>
      </article>

      <!-- Movie 3 -->
      <article class="movie-card" data-category="action" id="movie-wonder-woman">
        <div class="movie-poster">
          <img src="images/wonderwoman.png" alt="Wonder Woman 1984">
          <div class="movie-overlay">
            <span class="age-rating">11+</span>
            <button class="play-trailer" type="button" aria-label="Spela trailer"><i class="fas fa-play"></i></button>
          </div>
        </div>
        <div class="movie-info">
          <h3>Wonder Woman 1984</h3>
          <p class="movie-genre"><i class="fas fa-film"></i> Action, Fantasy</p>
          <p class="movie-duration"><i class="fas fa-clock"></i> 2h 31min</p>
          <div class="movie-rating">
            <i class="fas fa-star"></i> 5.4/10
          </div>
          <div class="stream-actions">
            <button class="watch-btn" onclick="alert('Filmen spelas nu!')"><i class="fas fa-play"></i> Titta nu</button>
            <button class="watchlist-btn" onclick="toggleWatchlist(this)"><i class="far fa-bookmark"></i> Min lista</button>
          </div>
        </div>
      </article>

      <!-- Movie 4 -->
      <article class="movie-card" data-category="drama" id="movie-judy">
        <div class="movie-poster">
          <img src="images/judy.png" alt="Judy">
          <div class="movie-overlay">
            <span class="age-rating">11+</span>
              <button class="play-trailer" aria-label="Spela trailer"><i class="fas fa-play"></i></button>
          </div>
        </div>
        <div class="movie-info">
          <h3>Judy</h3>
          <p class="movie-genre"><i class="fas fa-film"></i> Biografi, Drama</p>
          <p class="movie-duration"><i class="fas fa-clock"></i> 1h 58min</p>
          <div class="movie-rating">
            <i class="fas fa-star"></i> 6.8/10
          </div>
          <div class="stream-actions">
            <button class="watch-btn" onclick="alert('Filmen spelas nu!')"><i class="fas fa-play"></i> Titta nu</button>
            <button class="watchlist-btn" onclick="toggleWatchlist(this)"><i class="far fa-bookmark"></i> Min lista</button>
          </div>
        </div>
      </article>

      <!-- Movie 5 -->
      <article class="movie-card" data-category="drama" id="movie-lady-bird">
        <div class="movie-poster">
          <img src="images/ladybird.png" alt="Lady Bird">
          <div class="movie-overlay">
            <span class="age-rating">11+</span>
            <button class="play-trailer" aria-label="Spela trailer"><i class="fas fa-play"></i></button>
          </div>
        </div>
        <div class="movie-info">
          <h3>Lady Bird</h3>
          <p class="movie-genre"><i class="fas fa-film"></i> Drama, Komedi</p>
          <p class="movie-duration"><i class="fas fa-clock"></i> 1h 34min</p>
          <div class="movie-rating">
            <i class="fas fa-star"></i> 7.4/10
          </div>
          <div class="stream-actions">
            <button class="watch-btn" onclick="alert('Filmen spelas nu!')"><i class="fas fa-play"></i> Titta nu</button>
            <button class="watchlist-btn" onclick="toggleWatchlist(this)"><i class="far fa-bookmark"></i> Min lista</button>
          </div>
        </div>
      </article>

      <!-- Movie 6 -->
      <article class="movie-card" data-category="comedy" id="movie-grand-budapest">
        <div class="movie-poster">
          <img src="images/pexels-photo-903454.jpeg" alt="The Grand Budapest Hotel">
          <div class="movie-overlay">
            <span class="age-rating">11+</span>
            <button class="play-trailer" aria-label="Spela trailer"><i class="fas fa-play"></i></button>
          </div>
        </div>
        <div class="movie-info">
          <h3>The Grand Budapest Hotel</h3>
          <p class="movie-genre"><i class="fas fa-film"></i> Komedi, Drama</p>
          <p class="movie-duration"><i class="fas fa-clock"></i> 1h 39min</p>
          <div class="movie-rating">
            <i class="fas fa-star"></i> 8.1/10
          </div>
          <div class="stream-actions">
            <button class="watch-btn" onclick="alert('Filmen spelas nu!')"><i class="fas fa-play"></i> Titta nu</button>
            <button class="watchlist-btn" onclick="toggleWatchlist(this)"><i class="far fa-bookmark"></i> Min lista</button>
          </div>
        </div>
      </article>

      <!-- Movie 7 - Horror -->
      <article class="movie-card" data-category="horror" id="movie-the-haunting">
        <div class="movie-poster">
          <img src="https://images.pexels.com/photos/5435446/pexels-photo-5435446.jpeg?auto=compress&cs=tinysrgb&w=600" alt="The Haunting">
          <div class="movie-overlay">
            <span class="age-rating">15+</span>
            <button class="play-trailer" aria-label="Spela trailer"><i class="fas fa-play"></i></button>
          </div>
        </div>
        <div class="movie-info">
          <h3>The Haunting</h3>
          <p class="movie-genre"><i class="fas fa-film"></i> Skr칛ck, Thriller</p>
          <p class="movie-duration"><i class="fas fa-clock"></i> 1h 52min</p>
          <div class="movie-rating">
            <i class="fas fa-star"></i> 7.2/10
          </div>
          <div class="stream-actions">
            <button class="watch-btn" onclick="alert('Filmen spelas nu!')"><i class="fas fa-play"></i> Titta nu</button>
            <button class="watchlist-btn" onclick="toggleWatchlist(this)"><i class="far fa-bookmark"></i> Min lista</button>
          </div>
        </div>
      </article>

      <!-- Movie 8 - Horror -->
      <article class="movie-card" data-category="horror" id="movie-nightmare-realm">
        <div class="movie-poster">
          <img src="https://image.tmdb.org/t/p/w500/9E2y5Q7WlCVNEhP5GiVTjhEhx1o.jpg" alt="Nightmare Realm">
          <div class="movie-overlay">
            <span class="age-rating">15+</span>
            <button class="play-trailer" type="button" aria-label="Spela trailer"><i class="fas fa-play"></i></button>
          </div>
        </div>
        <div class="movie-info">
          <h3>Nightmare Realm</h3>
          <p class="movie-genre"><i class="fas fa-film"></i> Skr칛ck, Mystery</p>
          <p class="movie-duration"><i class="fas fa-clock"></i> 1h 45min</p>
          <div class="movie-rating">
            <i class="fas fa-star"></i> 6.9/10
          </div>
          <div class="stream-actions">
            <button class="watch-btn" onclick="alert('Filmen spelas nu!')"><i class="fas fa-play"></i> Titta nu</button>
            <button class="watchlist-btn" onclick="toggleWatchlist(this)"><i class="far fa-bookmark"></i> Min lista</button>
          </div>
        </div>
      </article>

      <!-- Movie 9 - Family -->
      <article class="movie-card" data-category="family" id="movie-magic-adventure">
        <div class="movie-poster">
          <img src="https://image.tmdb.org/t/p/w500/kuf6dutpsT0vSVehic3EZIqkOBt.jpg" alt="The Magic Adventure">
          <div class="movie-overlay">
            <span class="age-rating">Alla</span>
            <button class="play-trailer" type="button" aria-label="Spela trailer"><i class="fas fa-play"></i></button>
          </div>
        </div>
        <div class="movie-info">
          <h3>The Magic Adventure</h3>
          <p class="movie-genre"><i class="fas fa-film"></i> Familj, Animerad</p>
          <p class="movie-duration"><i class="fas fa-clock"></i> 1h 35min</p>
          <div class="movie-rating">
            <i class="fas fa-star"></i> 7.8/10
          </div>
          <div class="stream-actions">
            <button class="watch-btn" onclick="alert('Filmen spelas nu!')"><i class="fas fa-play"></i> Titta nu</button>
            <button class="watchlist-btn" onclick="toggleWatchlist(this)"><i class="far fa-bookmark"></i> Min lista</button>
          </div>
        </div>
      </article>

      <!-- Movie 10 - Family -->
      <article class="movie-card" data-category="family" id="movie-paws-friends">
        <div class="movie-poster">
          <img src="https://image.tmdb.org/t/p/w500/8Vt6mWEReuy4Of61Lnj5Xj704m8.jpg" alt="Paws & Friends">
          <div class="movie-overlay">
            <span class="age-rating">Alla</span>
            <button class="play-trailer" type="button" aria-label="Spela trailer"><i class="fas fa-play"></i></button>
          </div>
        </div>
        <div class="movie-info">
          <h3>Paws & Friends</h3>
          <p class="movie-genre"><i class="fas fa-film"></i> Familj, Komedi</p>
          <p class="movie-duration"><i class="fas fa-clock"></i> 1h 28min</p>
          <div class="movie-rating">
            <i class="fas fa-star"></i> 7.1/10
          </div>
          <div class="stream-actions">
            <button class="watch-btn" onclick="alert('Filmen spelas nu!')"><i class="fas fa-play"></i> Titta nu</button>
            <button class="watchlist-btn" onclick="toggleWatchlist(this)"><i class="far fa-bookmark"></i> Min lista</button>
          </div>
        </div>
      </article>

      <!-- Movie 11 - Sci-Fi -->
      <article class="movie-card" data-category="scifi" id="movie-galaxy-frontier">
        <div class="movie-poster">
          <img src="https://image.tmdb.org/t/p/w500/d5NXSklXo0qyIYkgV94XAgMIckC.jpg" alt="Galaxy Frontier">
          <div class="movie-overlay">
            <span class="age-rating">11+</span>
            <button class="play-trailer" type="button" aria-label="Spela trailer"><i class="fas fa-play"></i></button>
          </div>
        </div>
        <div class="movie-info">
          <h3>Galaxy Frontier</h3>
          <p class="movie-genre"><i class="fas fa-film"></i> Sci-Fi, 츿ventyr</p>
          <p class="movie-duration"><i class="fas fa-clock"></i> 2h 15min</p>
          <div class="movie-rating">
            <i class="fas fa-star"></i> 8.0/10
          </div>
          <div class="stream-actions">
            <button class="watch-btn" onclick="alert('Filmen spelas nu!')"><i class="fas fa-play"></i> Titta nu</button>
            <button class="watchlist-btn" onclick="toggleWatchlist(this)"><i class="far fa-bookmark"></i> Min lista</button>
          </div>
        </div>
      </article>

      <!-- Movie 12 - Sci-Fi -->
      <article class="movie-card" data-category="scifi" id="movie-cyber-world">
        <div class="movie-poster">
          <img src="https://images.pexels.com/photos/3861969/pexels-photo-3861969.jpeg?auto=compress&cs=tinysrgb&w=600" alt="Cyber World">
          <div class="movie-overlay">
            <span class="age-rating">15+</span>
            <button class="play-trailer" type="button" aria-label="Spela trailer"><i class="fas fa-play"></i></button>
          </div>
        </div>
        <div class="movie-info">
          <h3>Cyber World 2077</h3>
          <p class="movie-genre"><i class="fas fa-film"></i> Sci-Fi, Action</p>
          <p class="movie-duration"><i class="fas fa-clock"></i> 2h 22min</p>
          <div class="movie-rating">
            <i class="fas fa-star"></i> 7.6/10
          </div>
          <div class="stream-actions">
            <button class="watch-btn" onclick="alert('Filmen spelas nu!')"><i class="fas fa-play"></i> Titta nu</button>
            <button class="watchlist-btn" onclick="toggleWatchlist(this)"><i class="far fa-bookmark"></i> Min lista</button>
          </div>
        </div>
      </article>
    </div>
  </section>

  <!-- COMING SOON -->
  <section class="coming-soon" id="coming-soon">
    <div class="section-header">
      <h2><i class="fas fa-calendar-alt"></i> Kommer snart</h2>
      <p>Nya titlar som snart finns att streama</p>
    </div>

    <div class="coming-grid">
      <article class="coming-card">
        <div class="coming-poster">

          <img src="https://images.pexels.com/photos/5489194/pexels-photo-5489194.jpeg?auto=compress&cs=tinysrgb&w=600" alt="Dune: Part Two">


          <img src="https://image.tmdb.org/t/p/w500/8b8R8l88Qje9dn9OE8PY05Nez7Y.jpg" alt="Dune: Part Two">

          <img src="https://image.tmdb.org/t/p/w500/8b8R8l88Qje9dn9OE8PY05Nez7.jpg" alt="Dune: Part Two">

          <div class="coming-date">
            <span class="day">15</span>
            <span class="month">MAR</span>
          </div>
        </div>
        <div class="coming-info">
          <h3>Dune: Part Two</h3>
          <p class="coming-genre">Sci-Fi, 츿ventyr</p>
          <p class="coming-description">Paul Atreides f칬renar sig med Chani och Fremen medan han s칬ker h칛mnd mot de som f칬rst칬rde hans familj.</p>
          <button class="notify-btn"><i class="fas fa-bell"></i> P친minn mig</button>
        </div>
      </article>

      <article class="coming-card">
        <div class="coming-poster">
          <img src="images/tenet.jpg" alt="Oppenheimer">
          <div class="coming-date">
            <span class="day">22</span>
            <span class="month">MAR</span>
          </div>
        </div>
        <div class="coming-info">
          <h3>Oppenheimer</h3>
          <p class="coming-genre">Drama, Historisk</p>
          <p class="coming-description">Ber칛ttelsen om J. Robert Oppenheimer och hans roll i utvecklingen av atombomben.</p>
          <button class="notify-btn"><i class="fas fa-bell"></i> P친minn mig</button>
        </div>
      </article>

      <article class="coming-card">
        <div class="coming-poster">
          <img src="images/wonderwoman.png" alt="Aquaman 2">
          <div class="coming-date">
            <span class="day">05</span>
            <span class="month">APR</span>
          </div>
        </div>
        <div class="coming-info">
          <h3>Aquaman and the Lost Kingdom</h3>
          <p class="coming-genre">Action, Fantasy</p>
          <p class="coming-description">Arthur Curry m친ste smida en obekv칛m allians f칬r att skydda Atlantis fr친n en ur친ldrig kraft.</p>
          <button class="notify-btn"><i class="fas fa-bell"></i> P친minn mig</button>
        </div>
      </article>
    </div>
  </section>

  <!-- SUBSCRIPTION PLANS -->
  <section class="specials" id="specials">
    <div class="section-header">
      <h2><i class="fas fa-crown"></i> Abonnemang</h2>
      <p>V칛lj det abonnemang som passar dig b칛st</p>
    </div>

    <div class="specials-grid">
      <article class="special-card" onclick="showOfferDetail('basic')">
        <div class="special-icon">
          <i class="fas fa-play"></i>
        </div>
        <h3>Basic</h3>
        <p class="special-price">89 kr/m친n</p>
        <p>Perfekt f칬r att komma ig친ng. Streama filmer i HD-kvalitet p친 en enhet.</p>
        <ul class="special-features">
          <li><i class="fas fa-check"></i> Obegr칛nsat antal filmer</li>
          <li><i class="fas fa-check"></i> HD-kvalitet (720p)</li>
          <li><i class="fas fa-check"></i> 1 enhet samtidigt</li>
          <li><i class="fas fa-check"></i> Avbryt n칛r som helst</li>
        </ul>
        <button class="special-btn">V칛lj Basic <i class="fas fa-arrow-right"></i></button>
      </article>

      <article class="special-card featured" onclick="showOfferDetail('standard')">
        <div class="special-badge">Popul칛r</div>
        <div class="special-icon">
          <i class="fas fa-star"></i>
        </div>
        <h3>Standard</h3>
        <p class="special-price">139 kr/m친n</p>
        <p>V친r mest popul칛ra plan. Full HD och streama p친 tv친 enheter samtidigt.</p>
        <ul class="special-features">
          <li><i class="fas fa-check"></i> Obegr칛nsat antal filmer</li>
          <li><i class="fas fa-check"></i> Full HD-kvalitet (1080p)</li>
          <li><i class="fas fa-check"></i> 2 enheter samtidigt</li>
          <li><i class="fas fa-check"></i> Ladda ner f칬r offline</li>
          <li><i class="fas fa-check"></i> Avbryt n칛r som helst</li>
        </ul>
        <button class="special-btn">V칛lj Standard <i class="fas fa-arrow-right"></i></button>
      </article>

      <article class="special-card" onclick="showOfferDetail('premium')">
        <div class="special-icon">
          <i class="fas fa-gem"></i>
        </div>
        <h3>Premium</h3>
        <p class="special-price">189 kr/m친n</p>
        <p>Den ultimata upplevelsen. 4K Ultra HD, Dolby Atmos och upp till 4 enheter.</p>
        <ul class="special-features">
          <li><i class="fas fa-check"></i> Obegr칛nsat antal filmer</li>
          <li><i class="fas fa-check"></i> 4K Ultra HD + HDR</li>
          <li><i class="fas fa-check"></i> Dolby Atmos-ljud</li>
          <li><i class="fas fa-check"></i> 4 enheter samtidigt</li>
          <li><i class="fas fa-check"></i> Ladda ner f칬r offline</li>
          <li><i class="fas fa-check"></i> Exklusivt inneh친ll</li>
        </ul>
        <button class="special-btn">V칛lj Premium <i class="fas fa-arrow-right"></i></button>
      </article>
    </div>
  </section>

  <!-- GIFT CARDS -->
  <section class="giftcards" id="giftcards">
    <div class="giftcard-content">
      <div class="giftcard-text">
        <h2><i class="fas fa-gift"></i> Presentkort</h2>
        <p>Ge bort en streamingupplevelse! V친ra presentkort 칛r den perfekta g친van f칬r film칛lskare. V칛lj valfritt belopp fr친n 200 kr till 1000 kr.</p>
        <ul class="giftcard-features">
          <li><i class="fas fa-check"></i> Giltigt i 2 친r</li>
          <li><i class="fas fa-check"></i> Kan anv칛ndas f칬r abonnemang</li>
          <li><i class="fas fa-check"></i> Digitalt presentkort via e-post</li>
          <li><i class="fas fa-check"></i> Personligt meddelande</li>
        </ul>
        <div class="giftcard-amounts">
          <button class="amount-btn">200 kr</button>
          <button class="amount-btn">300 kr</button>
          <button class="amount-btn active">500 kr</button>
          <button class="amount-btn">1000 kr</button>
        </div>
        <button class="giftcard-buy"><i class="fas fa-shopping-cart"></i> K칬p presentkort</button>
      </div>
      <div class="giftcard-image">
        <div class="giftcard-preview">
          <div class="giftcard-front">
            <img src="images/logobio.png" alt="Din Bio">
            <p class="giftcard-value">500 kr</p>
            <p class="giftcard-label">PRESENTKORT</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- NEWSLETTER -->
  <section class="newsletter" id="newsletter">
    <div class="newsletter-content">
      <h2><i class="fas fa-envelope"></i> Nyhetsbrev</h2>
      <p>Prenumerera p친 v친rt nyhetsbrev och f친 exklusiva erbjudanden, f칬rhandsvisningar och filmtips direkt i din inkorg.</p>
      <form class="newsletter-form" onsubmit="event.preventDefault(); alert('Tack f칬r din prenumeration!');">
        <div class="form-group">
          <input type="email" placeholder="Din e-postadress" required aria-label="E-postadress">
          <button type="submit"><i class="fas fa-paper-plane"></i> Prenumerera</button>
        </div>
        <label class="checkbox-label">
          <input type="checkbox" required>
          <span>Jag godk칛nner att ta emot nyhetsbrev och erbjudanden fr친n Din Bio</span>
        </label>
      </form>
      <div class="newsletter-perks">
        <div class="perk">
          <i class="fas fa-percent"></i>
          <span>Exklusiva rabatter</span>
        </div>
        <div class="perk">
          <i class="fas fa-eye"></i>
          <span>F칬rhandsvisningar</span>
        </div>
        <div class="perk">
          <i class="fas fa-trophy"></i>
          <span>T칛vlingar</span>
        </div>
      </div>
    </div>
  </section>

  <!-- ABOUT -->
  <section class="about" id="about">
    <div class="section-header">
      <h2><i class="fas fa-info-circle"></i> Om oss</h2>
      <p>Din streamingplattform f칬r de b칛sta filmerna</p>
    </div>

    <div class="about-content">
      <div class="about-text">
        <p>Din Bio 칛r din svenska streamingplattform f칬r filmer. Vi brinner f칬r film och str칛var efter att ge dig den b칛sta streamingupplevelsen m칬jligt.</p>
        <p>Med tusentals filmer i HD, Full HD och 4K Ultra HD erbjuder vi allt fr친n de senaste blockbusters till klassiska kultfilmer och independentproduktioner.</p>
        <div class="about-stats">
          <div class="stat">
            <span class="stat-number">5000+</span>
            <span class="stat-label">Filmer</span>
          </div>
          <div class="stat">
            <span class="stat-number">4K</span>
            <span class="stat-label">Ultra HD</span>
          </div>
          <div class="stat">
            <span class="stat-number">3</span>
            <span class="stat-label">Abonnemang</span>
          </div>
          <div class="stat">
            <span class="stat-number">24/7</span>
            <span class="stat-label">Tillg칛nglig</span>
          </div>
        </div>
      </div>
      <div class="about-features">
        <div class="feature">
          <i class="fas fa-tv"></i>
          <h4>Alla enheter</h4>
          <p>Streama p친 TV, dator, mobil och surfplatta</p>
        </div>
        <div class="feature">
          <i class="fas fa-volume-up"></i>
          <h4>Dolby Atmos</h4>
          <p>Omslutande ljudupplevelse med Premium</p>
        </div>
        <div class="feature">
          <i class="fas fa-download"></i>
          <h4>Ladda ner</h4>
          <p>Se filmer offline med Standard och Premium</p>
        </div>
        <div class="feature">
          <i class="fas fa-users"></i>
          <h4>Familjekonton</h4>
          <p>Skapa profiler f칬r hela familjen</p>
        </div>
      </div>
    </div>
  </section>

  <!-- FOOTER -->
  <footer>
    <div class="footer-content">
      <div class="footer-section">
        <h4>Snabbl칛nkar</h4>
        <nav class="footer-nav">
          <a href="#now-showing">Popul칛rt just nu</a>
          <a href="#coming-soon">Kommer snart</a>
          <a href="#specials">Abonnemang</a>
          <a href="#giftcards">Presentkort</a>
        </nav>
      </div>

      <div class="footer-section">
        <h4>Information</h4>
        <nav class="footer-nav">
          <a href="#about">Om oss</a>
          <a href="#">Jobba hos oss</a>
          <a href="#">Villkor</a>
          <a href="#">Integritetspolicy</a>
        </nav>
      </div>

      <div class="footer-section">
        <h4>Kontakt</h4>
        <div class="footer-contact">
          <p><i class="fas fa-envelope"></i> info@dinbio.se</p>
          <p><i class="fas fa-headset"></i> Kundtj칛nst: 08-123 456 78</p>
          <p><i class="fas fa-clock"></i> Support: Dygnet runt</p>
        </div>
      </div>

      <div class="footer-section">
        <h4>F칬lj oss</h4>
        <div class="footer-social">
          <a href="https://facebook.com" target="_blank" rel="noopener noreferrer" aria-label="Facebook">
            <i class="fab fa-facebook-f"></i>
          </a>
          <a href="https://instagram.com" target="_blank" rel="noopener noreferrer" aria-label="Instagram">
            <i class="fab fa-instagram"></i>
          </a>
        </div>
        <div class="app-buttons">
          <button class="app-btn"><i class="fab fa-apple"></i> App Store</button>
          <button class="app-btn"><i class="fab fa-google-play"></i> Google Play</button>
        </div>
      </div>

      <div class="footer-bottom">
        <p>&copy; 2024 Din Bio. Alla r칛ttigheter f칬rbeh친llna.</p>
        <div class="payment-methods">

          <i class="fab fa-cc-visa"></i>
          <i class="fab fa-cc-mastercard"></i>
          <span class="swish-icon" title="Swish">Swish</span>

          <i class="fab fa-cc-visa" title="Visa"></i>
          <span class="swish-icon" title="Swish">Swish</span>
          <i class="fab fa-cc-mastercard" title="Mastercard"></i>

        </div>
      </div>
    </div>
  </footer>

  <!-- TOAST NOTIFICATION -->
  <div class="toast-notification" id="reminderToast">
    <div class="toast-content">
      <i class="fas fa-bell"></i>
      <span id="toastMessage">P친minnelse sparad!</span>
    </div>
  </div>

  <!-- USER PROFILE MODAL -->
  <div class="modal-overlay" id="profileModal">
    <div class="modal profile-modal">
      <button class="modal-close" id="closeProfileModal" type="button" aria-label="St칛ng"><i class="fas fa-times"></i></button>

      <div class="profile-header">
        <div class="profile-avatar">
          <i class="fas fa-user-circle"></i>
        </div>
        <h2>Min Profil</h2>
        <p class="profile-member">Medlem sedan 2024</p>
      </div>

      <div class="profile-qr-section">
        <div class="profile-qr">
          <canvas id="profileQR" width="120" height="120"></canvas>
          <p>Medlemskorts-QR</p>
          <span class="profile-member-id">DIN BIO #2024-0847</span>
        </div>
      </div>

      <div class="profile-tabs">
        <button class="profile-tab active" data-tab="bookings"><i class="fas fa-bookmark"></i> Min lista</button>
        <button class="profile-tab" data-tab="info"><i class="fas fa-id-card"></i> Min info</button>
        <button class="profile-tab" data-tab="watched"><i class="fas fa-film"></i> Sedda filmer</button>
        <button class="profile-tab" data-tab="giftcards"><i class="fas fa-gift"></i> Presentkort</button>
        <button class="profile-tab" data-tab="family"><i class="fas fa-users"></i> Familj</button>
      </div>

      <!-- Watchlist Tab -->
      <div class="profile-tab-content active" id="tab-bookings">
        <h3><i class="fas fa-bookmark"></i> Min lista</h3>
        <p style="color: var(--color-text-light); margin-bottom: 16px;">Filmer du har sparat att se senare</p>
        <div class="profile-booking-card">
          <div class="profile-booking-poster">
            <img src="images/tenet.jpg" alt="Tenet">
          </div>
          <div class="profile-booking-info">
            <h4>Tenet</h4>
            <p><i class="fas fa-film"></i> Action, Sci-Fi</p>
            <p><i class="fas fa-clock"></i> 2h 30min</p>
            <button class="watch-btn" style="margin-top:8px; padding:6px 16px; font-size:0.85rem;" onclick="alert('Filmen spelas nu!')"><i class="fas fa-play"></i> Titta nu</button>
          </div>
        </div>
        <div class="profile-booking-card">
          <div class="profile-booking-poster">
            <img src="images/once-upon-a-time.png" alt="Once Upon a Time">
          </div>
          <div class="profile-booking-info">
            <h4>Once Upon a Time in Hollywood</h4>
            <p><i class="fas fa-film"></i> Drama, Komedi</p>
            <p><i class="fas fa-clock"></i> 2h 41min</p>
            <button class="watch-btn" style="margin-top:8px; padding:6px 16px; font-size:0.85rem;" onclick="alert('Filmen spelas nu!')"><i class="fas fa-play"></i> Titta nu</button>
          </div>
        </div>
        <div class="profile-booking-card">
          <div class="profile-booking-poster">
            <img src="images/judy.png" alt="Judy">
          </div>
          <div class="profile-booking-info">
            <h4>Judy</h4>
            <p><i class="fas fa-film"></i> Biografi, Drama</p>
            <p><i class="fas fa-clock"></i> 1h 58min</p>
            <button class="watch-btn" style="margin-top:8px; padding:6px 16px; font-size:0.85rem;" onclick="alert('Filmen spelas nu!')"><i class="fas fa-play"></i> Titta nu</button>
          </div>
        </div>
      </div>

      <!-- Info Tab -->
      <div class="profile-tab-content" id="tab-info">
        <h3><i class="fas fa-user"></i> Personuppgifter</h3>
        <form class="profile-form" id="profileForm">
          <div class="form-row">
            <div class="form-field">
              <label>F칬rnamn</label>
              <input type="text" value="Anna" id="profileFirstName">
            </div>
            <div class="form-field">
              <label>Efternamn</label>
              <input type="text" value="Andersson" id="profileLastName">
            </div>
          </div>
          <div class="form-field">
            <label>E-post</label>
            <input type="email" value="anna.andersson@email.se" id="profileEmail">
          </div>
          <div class="form-field">
            <label>Telefon</label>
            <input type="tel" value="070-123 45 67" id="profilePhone">
          </div>
          <h3 style="margin-top:24px;"><i class="fas fa-map-marker-alt"></i> Adress</h3>
          <div class="form-field">
            <label>Gatuadress</label>
            <input type="text" value="Filmgatan 45" id="profileAddress">
          </div>
          <div class="form-row">
            <div class="form-field">
              <label>Postnummer</label>
              <input type="text" value="111 22" id="profileZip">
            </div>
            <div class="form-field">
              <label>Stad</label>
              <input type="text" value="Stockholm" id="profileCity">
            </div>
          </div>
          <h3 style="margin-top:24px;"><i class="fas fa-envelope"></i> Kontaktinst칛llningar</h3>
          <label class="checkbox-label" style="justify-content:flex-start; color:var(--color-text);">
            <input type="checkbox" checked>
            <span>Nyhetsbrev via e-post</span>
          </label>
          <label class="checkbox-label" style="justify-content:flex-start; color:var(--color-text);">
            <input type="checkbox" checked>
            <span>SMS-p친minnelser om nya filmer</span>
          </label>
          <label class="checkbox-label" style="justify-content:flex-start; color:var(--color-text);">
            <input type="checkbox">
            <span>Erbjudanden via SMS</span>
          </label>
          <button type="button" class="profile-save-btn" onclick="alert('Profil sparad!')"><i class="fas fa-save"></i> Spara 칛ndringar</button>
        </form>
      </div>

      <!-- Watched Movies Tab -->
      <div class="profile-tab-content" id="tab-watched">
        <h3><i class="fas fa-eye"></i> Filmer jag sett</h3>
        <div class="watched-movies-grid">
          <div class="watched-movie-card">
            <img src="images/judy.png" alt="Judy">
            <div class="watched-movie-info">
              <h4>Judy</h4>
              <p>Biografi, Drama</p>
              <div class="watched-rating">
                <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="far fa-star"></i>
              </div>
              <span class="watched-date">10 jan 2025</span>
            </div>
          </div>
          <div class="watched-movie-card">
            <img src="images/ladybird.png" alt="Lady Bird">
            <div class="watched-movie-info">
              <h4>Lady Bird</h4>
              <p>Drama, Komedi</p>
              <div class="watched-rating">
                <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star-half-alt"></i>
              </div>
              <span class="watched-date">28 dec 2024</span>
            </div>
          </div>
          <div class="watched-movie-card">
            <img src="images/pexels-photo-903454.jpeg" alt="Grand Budapest Hotel">
            <div class="watched-movie-info">
              <h4>Grand Budapest Hotel</h4>
              <p>Komedi, Drama</p>
              <div class="watched-rating">
                <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
              </div>
              <span class="watched-date">15 dec 2024</span>
            </div>
          </div>
          <div class="watched-movie-card">
            <img src="images/tenet.jpg" alt="Tenet">
            <div class="watched-movie-info">
              <h4>Tenet</h4>
              <p>Action, Sci-Fi</p>
              <div class="watched-rating">
                <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="far fa-star"></i>
              </div>
              <span class="watched-date">1 dec 2024</span>
            </div>
          </div>
        </div>
        <p class="watched-total"><i class="fas fa-film"></i> Totalt: <strong>4 filmer</strong> sedda</p>
      </div>

      <!-- Gift Cards Tab -->
      <div class="profile-tab-content" id="tab-giftcards">
        <h3><i class="fas fa-gift"></i> Mina presentkort</h3>
        <div class="profile-giftcard">
          <div class="profile-giftcard-visual">
            <span class="giftcard-amount-display">350 kr</span>
            <span class="giftcard-code-display">DIN-BIO-7842</span>
          </div>
          <div class="profile-giftcard-details">
            <p><strong>Saldo:</strong> 350 kr av 500 kr</p>
            <div class="giftcard-balance-bar">
              <div class="giftcard-balance-fill" style="width:70%"></div>
            </div>
            <p><i class="fas fa-calendar"></i> Giltigt till: 15 jan 2027</p>
          </div>
        </div>
        <div class="profile-giftcard">
          <div class="profile-giftcard-visual">
            <span class="giftcard-amount-display">200 kr</span>
            <span class="giftcard-code-display">DIN-BIO-3291</span>
          </div>
          <div class="profile-giftcard-details">
            <p><strong>Saldo:</strong> 200 kr av 200 kr</p>
            <div class="giftcard-balance-bar">
              <div class="giftcard-balance-fill" style="width:100%"></div>
            </div>
            <p><i class="fas fa-calendar"></i> Giltigt till: 20 mar 2027</p>
          </div>
        </div>
        <button class="profile-buy-giftcard-btn" onclick="closeProfileModal(); document.getElementById('giftcards').scrollIntoView({behavior:'smooth'});">
          <i class="fas fa-plus"></i> K칬p nytt presentkort
        </button>
      </div>

      <!-- Family Tab -->
      <div class="profile-tab-content" id="tab-family">
        <h3><i class="fas fa-users"></i> Familjemedlemmar</h3>
        <p class="family-info-text">L칛gg till familjemedlemmar och dela ditt abonnemang med <strong>upp till 4 profiler</strong>!</p>
        <div class="family-member-card">
          <div class="family-member-avatar"><i class="fas fa-user"></i></div>
          <div class="family-member-info">
            <h4>Anna Andersson</h4>
            <p>Huvudmedlem</p>
          </div>
          <span class="family-role-badge">Admin</span>
        </div>
        <div class="family-member-card">
          <div class="family-member-avatar"><i class="fas fa-user"></i></div>
          <div class="family-member-info">
            <h4>Erik Andersson</h4>
            <p>Familjemedlem</p>
          </div>
          <span class="family-role-badge member">Medlem</span>
        </div>
        <div class="family-member-card">
          <div class="family-member-avatar child"><i class="fas fa-child"></i></div>
          <div class="family-member-info">
            <h4>Maja Andersson</h4>
            <p>Barn (10 친r)</p>
          </div>
          <span class="family-role-badge child">Barn</span>
        </div>
        <button class="add-family-btn" onclick="alert('Funktionen kommer snart!')"><i class="fas fa-user-plus"></i> L칛gg till familjemedlem</button>
        <div class="family-discount-info">
          <div class="discount-badge"><i class="fas fa-percent"></i></div>
          <div>
            <h4>Familjeplan aktiv!</h4>
            <p>Dela ditt abonnemang med hela familjen</p>
            <p class="discount-saved"><strong>3 profiler</strong> aktiva av 4 m칬jliga</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- GIFT CARD PURCHASE MODAL -->
  <div class="modal-overlay" id="giftcardModal">
    <div class="modal">
      <button class="modal-close" id="closeGiftcardModal" type="button" aria-label="St칛ng"><i class="fas fa-times"></i></button>
      <div class="modal-step" id="giftcardStep1">
        <div class="modal-header">
          <h2><i class="fas fa-gift"></i> K칬p presentkort</h2>
        </div>
        <div class="giftcard-purchase-options">
          <p>V칛lj belopp:</p>
          <div class="giftcard-amount-grid">
            <button class="gc-amount-option" data-amount="200">200 kr</button>
            <button class="gc-amount-option" data-amount="300">300 kr</button>
            <button class="gc-amount-option active" data-amount="500">500 kr</button>
            <button class="gc-amount-option" data-amount="1000">1000 kr</button>
          </div>
          <div class="giftcard-purchase-preview">
            <div class="giftcard-front small">
              <img src="images/logobio.png" alt="Din Bio">
              <p class="giftcard-value" id="gcPreviewAmount">500 kr</p>
              <p class="giftcard-label">PRESENTKORT</p>
            </div>
          </div>
          <div class="form-field" style="margin-top:16px;">
            <label>Personligt meddelande (valfritt)</label>
            <input type="text" placeholder="Grattis p친 f칬delsedagen!" id="gcMessage">
          </div>
          <div class="form-field">
            <label>Mottagarens e-post</label>
            <input type="email" placeholder="mottagare@email.se" id="gcRecipientEmail" required>
          </div>
          <div class="form-field">
            <label>Ditt namn</label>
            <input type="text" placeholder="Ditt namn" id="gcSenderName" required>
          </div>
          <button class="modal-next-btn" id="gcToPay" style="margin-top:16px;"><i class="fas fa-credit-card"></i> G친 till betalning</button>
        </div>
      </div>
      <div class="modal-step hidden" id="giftcardStep2">
        <div class="modal-header">
          <h2><i class="fas fa-credit-card"></i> Betalning</h2>
        </div>
        <div class="order-summary" style="margin-bottom:20px;">
          <h4>Ordersammanfattning</h4>
          <p>Presentkort: <strong id="gcSummaryAmount">500 kr</strong></p>
          <p>Till: <span id="gcSummaryRecipient">-</span></p>
          <p class="summary-total">Totalt: <span id="gcSummaryTotal">500</span> kr</p>
        </div>
        <div class="form-field">
          <label>Kortnummer</label>
          <input type="text" placeholder="1234 5678 9012 3456" maxlength="19" id="gcCardNumber">
        </div>
        <div class="form-row">
          <div class="form-field">
            <label>Utg친ngsdatum</label>
            <input type="text" placeholder="MM/칀칀" maxlength="5" id="gcExpiry">
          </div>
          <div class="form-field">
            <label>CVV</label>
            <input type="text" placeholder="123" maxlength="3" id="gcCvv">
          </div>
        </div>
        <div class="modal-buttons" style="margin-top:20px;">
          <button type="button" class="modal-back-btn" id="gcBackToStep1"><i class="fas fa-arrow-left"></i> Tillbaka</button>
          <button type="button" class="modal-pay-btn" id="gcPayBtn"><i class="fas fa-lock"></i> Betala nu</button>
        </div>
      </div>
      <div class="modal-step hidden" id="giftcardStep3">
        <div class="confirmation">
          <div class="confirmation-icon">
            <i class="fas fa-check-circle"></i>
          </div>
          <h2>Presentkort skickat!</h2>
          <p>Presentkortet har skickats till mottagarens e-post.</p>
          <div class="giftcard-confirmation-code">
            <p>Presentkortskod:</p>
            <strong id="gcConfirmCode">DIN-BIO-XXXX</strong>
          </div>
          <button class="modal-close-btn" id="closeGiftcardConfirm">St칛ng</button>
        </div>
      </div>
    </div>
  </div>

  <!-- OFFER DETAIL MODAL -->
  <div class="modal-overlay" id="offerDetailModal">
    <div class="modal">
      <button class="modal-close" id="closeOfferModal" type="button" aria-label="St칛ng"><i class="fas fa-times"></i></button>
      <div class="modal-step">
        <div class="offer-detail-header" id="offerDetailHeader">
          <div class="offer-detail-icon"><i class="fas fa-tags"></i></div>
          <h2 id="offerDetailTitle">Erbjudande</h2>
        </div>
        <div class="offer-detail-body" id="offerDetailBody">
          <!-- Content will be inserted dynamically -->
        </div>
        <button class="modal-close-btn" style="margin-top:20px;" onclick="closeOfferDetail()">St칛ng</button>
      </div>
    </div>
  </div>

  <!-- MOVIE PLAYER MODAL -->
  <div class="modal-overlay" id="playerModal">
    <div class="modal player-modal">
      <button class="modal-close" id="closePlayerModal" type="button" aria-label="St칛ng"><i class="fas fa-times"></i></button>
      <div class="player-container">
        <div class="player-screen">
          <img id="playerMovieImage" src="" alt="">
          <div class="player-overlay">
            <button class="player-play-btn" onclick="alert('Filmen spelas nu!')">
              <i class="fas fa-play"></i>
            </button>
          </div>
        </div>
        <div class="player-info">
          <h2 id="playerMovieTitle"></h2>
          <div class="player-meta">
            <span id="playerMovieGenre"></span>
            <span id="playerMovieDuration"></span>
            <span id="playerMovieRating"></span>
          </div>
          <p id="playerMovieDescription" class="player-description"></p>
          <div class="player-actions">
            <button class="watch-btn" onclick="alert('Filmen spelas nu!')"><i class="fas fa-play"></i> Titta nu</button>
            <button class="watchlist-btn" onclick="toggleWatchlist(this)"><i class="far fa-bookmark"></i> Min lista</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- RECOMMENDATION MODAL -->
  <div class="modal-overlay" id="recommendModal">
    <div class="modal recommend-modal">
      <button class="modal-close" id="closeRecommendModal" type="button" aria-label="St칛ng rekommendationsmodal"><i class="fas fa-times"></i></button>

      <!-- Step 1: Mood -->
      <div class="recommend-step" id="recStep1">
        <div class="recommend-header">
          <div class="recommend-icon"><i class="fas fa-magic"></i></div>
          <h2>Filmassistenten</h2>
          <p>L친t oss hitta den perfekta filmen f칬r dig!</p>
        </div>
        <div class="recommend-question">
          <h3>Hur k칛nner du dig just nu?</h3>
          <div class="recommend-options mood-options">
            <button class="recommend-option" data-value="happy">
              <span class="option-emoji">游땕</span>
              <span class="option-text">Glad</span>
            </button>
            <button class="recommend-option" data-value="sad">
              <span class="option-emoji">游땩</span>
              <span class="option-text">K칛nslosam</span>
            </button>
            <button class="recommend-option" data-value="excited">
              <span class="option-emoji">游뱔</span>
              <span class="option-text">Sp칛nnande</span>
            </button>
            <button class="recommend-option" data-value="relaxed">
              <span class="option-emoji">游땗</span>
              <span class="option-text">Avslappnad</span>
            </button>
            <button class="recommend-option" data-value="scared">
              <span class="option-emoji">游땸</span>
              <span class="option-text">Vill bli r칛dd</span>
            </button>
            <button class="recommend-option" data-value="thoughtful">
              <span class="option-emoji">游뱂</span>
              <span class="option-text">Eftert칛nksam</span>
            </button>
          </div>
        </div>
        <div class="recommend-progress">
          <div class="progress-bar"><div class="progress-fill progress-25"></div></div>
          <span>1 / 4</span>
        </div>
      </div>

      <!-- Step 2: Company -->
      <div class="recommend-step hidden" id="recStep2">
        <div class="recommend-header">
          <div class="recommend-icon"><i class="fas fa-users"></i></div>
          <h2>Vem ska du titta med?</h2>
        </div>
        <div class="recommend-question">
          <div class="recommend-options">
            <button class="recommend-option" data-value="alone">
              <span class="option-emoji">游녻</span>
              <span class="option-text">Ensam</span>
            </button>
            <button class="recommend-option" data-value="date">
              <span class="option-emoji">游눔</span>
              <span class="option-text">Med dejt</span>
            </button>
            <button class="recommend-option" data-value="family">
              <span class="option-emoji">游녿꽳릠뽹꽳릠</span>
              <span class="option-text">Med familjen</span>
            </button>
            <button class="recommend-option" data-value="friends">
              <span class="option-emoji">游논</span>
              <span class="option-text">Med v칛nner</span>
            </button>
          </div>
        </div>
        <div class="recommend-nav">
          <button class="rec-back-btn" data-step="1"><i class="fas fa-arrow-left"></i> Tillbaka</button>
        </div>
        <div class="recommend-progress">
          <div class="progress-bar"><div class="progress-fill progress-50"></div></div>
          <span>2 / 4</span>
        </div>
      </div>

      <!-- Step 3: Age Group -->
      <div class="recommend-step hidden" id="recStep3">
        <div class="recommend-header">
          <div class="recommend-icon"><i class="fas fa-birthday-cake"></i></div>
          <h2>Vilken 친ldersgrupp?</h2>
        </div>
        <div class="recommend-question">
          <div class="recommend-options">
            <button class="recommend-option" data-value="child">
              <span class="option-emoji">游</span>
              <span class="option-text">Barn (7-12)</span>
            </button>
            <button class="recommend-option" data-value="teen">
              <span class="option-emoji">游븸</span>
              <span class="option-text">Ton친ring (13-17)</span>
            </button>
            <button class="recommend-option" data-value="adult">
              <span class="option-emoji">游녿</span>
              <span class="option-text">Vuxen (18+)</span>
            </button>
          </div>
        </div>
        <div class="recommend-nav">
          <button class="rec-back-btn" data-step="2"><i class="fas fa-arrow-left"></i> Tillbaka</button>
        </div>
        <div class="recommend-progress">
          <div class="progress-bar"><div class="progress-fill progress-75"></div></div>
          <span>3 / 4</span>
        </div>
      </div>

      <!-- Step 4: Duration -->
      <div class="recommend-step hidden" id="recStep4">
        <div class="recommend-header">
          <div class="recommend-icon"><i class="fas fa-clock"></i></div>
          <h2>Hur mycket tid har du?</h2>
        </div>
        <div class="recommend-question">
          <div class="recommend-options">
            <button class="recommend-option" data-value="short">
              <span class="option-emoji">丘</span>
              <span class="option-text">Kort (&lt;1.5 tim)</span>
            </button>
            <button class="recommend-option" data-value="medium">
              <span class="option-emoji">游꿟</span>
              <span class="option-text">Normal (1.5-2 tim)</span>
            </button>
            <button class="recommend-option" data-value="long">
              <span class="option-emoji">游꿠</span>
              <span class="option-text">L친ng (2+ tim)</span>
            </button>
          </div>
        </div>
        <div class="recommend-nav">
          <button class="rec-back-btn" data-step="3"><i class="fas fa-arrow-left"></i> Tillbaka</button>
        </div>
        <div class="recommend-progress">
          <div class="progress-bar"><div class="progress-fill progress-100"></div></div>
          <span>4 / 4</span>
        </div>
      </div>

      <!-- Step 5: Results -->
      <div class="recommend-step hidden" id="recStep5">
        <div class="recommend-header">
          <div class="recommend-icon success"><i class="fas fa-film"></i></div>
          <h2>V친ra rekommendationer!</h2>
          <p id="recommendationReason"></p>
        </div>
        <div class="recommend-results" id="recommendResults">
          <!-- Results will be inserted here -->
        </div>
        <button class="rec-restart-btn" id="restartRecommend"><i class="fas fa-redo"></i> B칬rja om</button>
      </div>
    </div>
  </div>

  <!-- P칀MINN MIG MODAL -->
  <div class="modal-overlay" id="remindModal">
    <div class="modal remind-modal">
      <button class="modal-close" id="closeRemindModal" type="button" aria-label="St칛ng"><i class="fas fa-times"></i></button>
      <div class="remind-content">
        <div class="remind-icon"><i class="fas fa-bell"></i></div>
        <h2 id="remindMovieTitle">P친minnelse</h2>
        <p>Ange din e-postadress s친 meddelar vi dig n칛r filmen har premi칛r!</p>
        <form class="remind-form" id="remindForm">
          <input type="email" id="remindEmail" placeholder="Din e-postadress" required aria-label="E-postadress">
          <button type="submit"><i class="fas fa-bell"></i> P친minn mig</button>
        </form>
        <div class="remind-success hidden" id="remindSuccess">
          <i class="fas fa-check-circle"></i>
          <p>Tack! Vi skickar en p친minnelse till dig n칛r filmen har premi칛r.</p>
        </div>
      </div>
    </div>
  </div>

  <!-- PRESENT KORT PURCHASE MODAL -->
  <div class="modal-overlay" id="giftcardModal">
    <div class="modal giftcard-purchase-modal">
      <button class="modal-close" id="closeGiftcardModal" type="button" aria-label="St칛ng"><i class="fas fa-times"></i></button>
      <div class="modal-header">
        <h2><i class="fas fa-gift"></i> K칬p Presentkort</h2>
      </div>
      <div class="giftcard-purchase-content">
        <div class="giftcard-purchase-preview">
          <div class="giftcard-front">
            <img src="images/logobio.png" alt="Din Bio">
            <p class="giftcard-value" id="modalGiftcardValue">500 kr</p>
            <p class="giftcard-label">PRESENTKORT</p>
          </div>
        </div>
        <form class="giftcard-purchase-form" id="giftcardPurchaseForm">
          <div class="form-field">
            <label>Mottagarens namn</label>
            <input type="text" id="giftRecipient" required placeholder="Namn">
          </div>
          <div class="form-field">
            <label>Din e-post</label>
            <input type="email" id="giftSenderEmail" required placeholder="din@email.se">
          </div>
          <div class="form-field">
            <label>Personligt meddelande (valfritt)</label>
            <textarea id="giftMessage" placeholder="Grattis p친 f칬delsedagen!" rows="3"></textarea>
          </div>
          <div class="form-field">
            <label>Leverans</label>
            <div class="delivery-options">
              <label class="delivery-option">
                <input type="radio" name="delivery" value="digital" checked>
                <span><i class="fas fa-envelope"></i> Digitalt (e-post)</span>
              </label>
              <label class="delivery-option">
                <input type="radio" name="delivery" value="physical">
                <span><i class="fas fa-box"></i> Fysiskt kort (+29 kr)</span>
              </label>
            </div>
          </div>
          <div class="giftcard-purchase-total">
            <p>Totalt: <span id="giftcardTotal">500</span> kr</p>
          </div>
          <button type="submit" class="modal-pay-btn"><i class="fas fa-lock"></i> Betala med Swish</button>
        </form>
        <div class="giftcard-success hidden" id="giftcardSuccess">
          <div class="confirmation-icon"><i class="fas fa-check-circle"></i></div>
          <h3>Presentkort k칬pt!</h3>
          <p>Presentkortet har skickats. Kod: <strong id="giftcardCode"></strong></p>
        </div>
      </div>
    </div>
  </div>

  <!-- PROFILE MODAL -->
  <div class="modal-overlay" id="profileModal">
    <div class="modal profile-modal">
      <button class="modal-close" id="closeProfileModal" type="button" aria-label="St칛ng"><i class="fas fa-times"></i></button>

      <div class="profile-header-section">
        <div class="profile-avatar">
          <i class="fas fa-user-circle"></i>
        </div>
        <h2>Min profil</h2>
        <p class="profile-member-since">Medlem sedan 2024</p>
      </div>

      <div class="profile-tabs">
        <button class="profile-tab active" data-tab="info"><i class="fas fa-user"></i> Info</button>
        <button class="profile-tab" data-tab="bookings"><i class="fas fa-ticket-alt"></i> Bokningar</button>
        <button class="profile-tab" data-tab="watched"><i class="fas fa-film"></i> Sedda</button>
        <button class="profile-tab" data-tab="cards"><i class="fas fa-gift"></i> Kort</button>
      </div>

      <!-- Tab: Info -->
      <div class="profile-tab-content active" id="tabInfo">
        <div class="profile-info-grid">
          <div class="profile-info-card">
            <h4><i class="fas fa-user"></i> Personuppgifter</h4>
            <div class="profile-field">
              <label>Namn</label>
              <input type="text" id="profileName" value="Anna Andersson" placeholder="Ditt namn">
            </div>
            <div class="profile-field">
              <label>E-post</label>
              <input type="email" id="profileEmail" value="anna@exempel.se" placeholder="Din e-post">
            </div>
            <div class="profile-field">
              <label>Telefon</label>
              <input type="tel" id="profilePhone" value="070-123 45 67" placeholder="Ditt telefonnummer">
            </div>
            <button class="profile-save-btn" id="saveProfileInfo"><i class="fas fa-save"></i> Spara</button>
          </div>

          <div class="profile-info-card">
            <h4><i class="fas fa-map-marker-alt"></i> Adress</h4>
            <div class="profile-field">
              <label>Gatuadress</label>
              <input type="text" id="profileAddress" value="Filmgatan 45" placeholder="Gatuadress">
            </div>
            <div class="profile-field">
              <label>Postnummer & Ort</label>
              <input type="text" id="profileCity" value="111 22 Stockholm" placeholder="Postnummer & Ort">
            </div>
            <button class="profile-save-btn" id="saveProfileAddress"><i class="fas fa-save"></i> Spara</button>
          </div>

          <div class="profile-info-card profile-qr-card">
            <h4><i class="fas fa-qrcode"></i> Min QR-kod</h4>
            <p>Visa denna QR-kod i kassan f칬r snabbare incheckning</p>
            <div class="profile-qr" id="profileQR"></div>
            <p class="profile-member-id" id="profileMemberId">Medlemsnr: DB-2024-0042</p>
          </div>
        </div>
      </div>

      <!-- Tab: Bookings -->
      <div class="profile-tab-content" id="tabBookings">
        <div class="profile-bookings-list">
          <div class="profile-booking-card">
            <div class="profile-booking-poster">
              <img src="images/once-upon-a-time.png" alt="Once Upon a Time in Hollywood">
            </div>
            <div class="profile-booking-info">
              <h4>Once Upon a Time in Hollywood</h4>
              <p><i class="fas fa-calendar"></i> 2024-03-15</p>
              <p><i class="fas fa-clock"></i> 20:00</p>
              <p><i class="fas fa-chair"></i> Rad D, Plats 5-6</p>
              <span class="booking-status completed">Genomf칬rd</span>
            </div>
          </div>
          <div class="profile-booking-card">
            <div class="profile-booking-poster">
              <img src="images/tenet.jpg" alt="Tenet">
            </div>
            <div class="profile-booking-info">
              <h4>Tenet</h4>
              <p><i class="fas fa-calendar"></i> 2024-04-02</p>
              <p><i class="fas fa-clock"></i> 18:00</p>
              <p><i class="fas fa-chair"></i> Rad F, Plats 8-9</p>
              <span class="booking-status upcoming">Kommande</span>
            </div>
          </div>
          <div class="profile-booking-card">
            <div class="profile-booking-poster">
              <img src="https://image.tmdb.org/t/p/w500/d5NXSklXo0qyIYkgV94XAgMIckC.jpg" alt="Galaxy Frontier">
            </div>
            <div class="profile-booking-info">
              <h4>Galaxy Frontier</h4>
              <p><i class="fas fa-calendar"></i> 2024-04-10</p>
              <p><i class="fas fa-clock"></i> 17:45</p>
              <p><i class="fas fa-chair"></i> Rad G (VIP), Plats 6-7</p>
              <span class="booking-status upcoming">Kommande</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Tab: Watched Movies -->
      <div class="profile-tab-content" id="tabWatched">
        <div class="profile-watched-grid">
          <div class="profile-watched-card">
            <img src="images/once-upon-a-time.png" alt="Once Upon a Time in Hollywood">
            <div class="watched-info">
              <h4>Once Upon a Time in Hollywood</h4>
              <p class="watched-date"><i class="fas fa-calendar"></i> 2024-03-15</p>
              <div class="watched-rating">
                <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star-half-alt"></i>
                <span>4.5/5</span>
              </div>
            </div>
          </div>
          <div class="profile-watched-card">
            <img src="images/judy.png" alt="Judy">
            <div class="watched-info">
              <h4>Judy</h4>
              <p class="watched-date"><i class="fas fa-calendar"></i> 2024-02-20</p>
              <div class="watched-rating">
                <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="far fa-star"></i>
                <span>4/5</span>
              </div>
            </div>
          </div>
          <div class="profile-watched-card">
            <img src="images/ladybird.png" alt="Lady Bird">
            <div class="watched-info">
              <h4>Lady Bird</h4>
              <p class="watched-date"><i class="fas fa-calendar"></i> 2024-01-10</p>
              <div class="watched-rating">
                <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                <span>5/5</span>
              </div>
            </div>
          </div>
          <div class="profile-watched-card">
            <img src="images/pexels-photo-903454.jpeg" alt="The Grand Budapest Hotel">
            <div class="watched-info">
              <h4>The Grand Budapest Hotel</h4>
              <p class="watched-date"><i class="fas fa-calendar"></i> 2023-12-05</p>
              <div class="watched-rating">
                <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star-half-alt"></i>
                <span>4.5/5</span>
              </div>
            </div>
          </div>
        </div>
        <div class="watched-stats">
          <div class="watched-stat">
            <span class="watched-stat-num">12</span>
            <span class="watched-stat-label">Filmer sedda</span>
          </div>
          <div class="watched-stat">
            <span class="watched-stat-num">4.3</span>
            <span class="watched-stat-label">Snittbetyg</span>
          </div>
          <div class="watched-stat">
            <span class="watched-stat-num">Drama</span>
            <span class="watched-stat-label">Favoritgenre</span>
          </div>
        </div>
      </div>

      <!-- Tab: Cards & Discounts -->
      <div class="profile-tab-content" id="tabCards">
        <div class="profile-cards-list">
          <div class="profile-card-item">
            <div class="profile-card-visual presentkort-visual">
              <img src="images/logobio.png" alt="Din Bio">
              <p class="card-amount">300 kr</p>
              <p class="card-type">PRESENTKORT</p>
            </div>
            <div class="profile-card-details">
              <h4>Presentkort</h4>
              <p>Saldo: <strong>300 kr</strong></p>
              <p>Giltigt till: 2026-03-15</p>
              <p class="card-code">Kod: GC-2024-8742</p>
            </div>
          </div>

          <div class="profile-card-item">
            <div class="profile-card-visual family-visual">
              <i class="fas fa-users"></i>
              <p class="card-type">FAMILJERABATT</p>
            </div>
            <div class="profile-card-details">
              <h4>Familjerabatt</h4>
              <p>Typ: <strong>Familj (4 personer)</strong></p>
              <p>Rabatt: <strong>20% p친 alla biljetter</strong></p>
              <p>Status: <span class="card-active">Aktiv</span></p>
            </div>
          </div>

          <div class="profile-card-item">
            <div class="profile-card-visual member-visual">
              <i class="fas fa-crown"></i>
              <p class="card-type">MEDLEMSKORT</p>
            </div>
            <div class="profile-card-details">
              <h4>Bio-medlemskap</h4>
              <p>Niv친: <strong>Guld</strong></p>
              <p>Po칛ng: <strong>1 250 p</strong></p>
              <p>N칛sta niv친: 1 500 p (Platinum)</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Close mobile menu when clicking a link
    document.querySelectorAll('.mobile-nav a').forEach(link => {
      link.addEventListener('click', () => {
        document.getElementById('menu-toggle').checked = false;
      });
    });

    // Close mobile menu when clicking outside
    document.addEventListener('click', function(e) {
      const menuToggle = document.getElementById('menu-toggle');
      // Don't interfere when clicking the toggle label/button itself
      if (e.target.closest('label[for="menu-toggle"]') || e.target.closest('.mobile-menu') || e.target.id === 'menu-toggle') {
        return;
      }
      // If menu is open and click is outside the nav, close it
      if (menuToggle.checked && !e.target.closest('.mobile-nav')) {
        menuToggle.checked = false;
      }
    });

    // ==========================================
    // MOVIE SEARCH FUNCTIONALITY
    // ==========================================
    
    const SEARCH_HISTORY_KEY = 'yourcinema_search_history';
    const MAX_HISTORY_ITEMS = 5;
    
    function initSearch() {
      const searchInput = document.getElementById('movieSearchInput');
      const searchResults = document.getElementById('searchResults');
      const searchInputMobile = document.getElementById('movieSearchInputMobile');
      const searchResultsMobile = document.getElementById('searchResultsMobile');
      
      // Get search history from localStorage
      function getSearchHistory() {
        try {
          return JSON.parse(localStorage.getItem(SEARCH_HISTORY_KEY)) || [];
        } catch {
          return [];
        }
      }
      
      // Save search to history
      function saveToHistory(query) {
        if (!query || query.length < 2) return;
        let history = getSearchHistory();
        history = history.filter(item => item.toLowerCase() !== query.toLowerCase());
        history.unshift(query);
        history = history.slice(0, MAX_HISTORY_ITEMS);
        localStorage.setItem(SEARCH_HISTORY_KEY, JSON.stringify(history));
      }
      
      // Get all movie cards
      function getMovies() {
        const movieCards = document.querySelectorAll('.movie-card');
        const movies = [];
        
        movieCards.forEach(card => {
          const title = card.querySelector('h3')?.textContent || '';
          const genre = card.querySelector('.movie-genre')?.textContent || '';
          const image = card.querySelector('.movie-poster img')?.src || '';
          const id = card.id;
          
          movies.push({ title, genre, image, id, card });
        });
        
        return movies;
      }
      
      // Search movies
      function searchMovies(query) {
        const movies = getMovies();
        const lowerQuery = query.toLowerCase().trim();
        
        if (!lowerQuery) return [];
        
        return movies.filter(movie => 
          movie.title.toLowerCase().includes(lowerQuery) ||
          movie.genre.toLowerCase().includes(lowerQuery)
        );
      }
      
      // Render history suggestions
      function renderHistoryAndSuggestions(container, inputElement) {
        const history = getSearchHistory();
        const movies = getMovies();
        
        let html = '';
        
        // Recent searches
        if (history.length > 0) {
          html += '<div class="search-section-title"><i class="fas fa-history"></i> Senaste s칬kningar</div>';
          html += history.map(term => `
            <div class="search-history-item" data-term="${term}">
              <i class="fas fa-clock"></i>
              <span>${term}</span>
              <button class="remove-history" data-term="${term}" aria-label="Ta bort"><i class="fas fa-times"></i></button>
            </div>
          `).join('');
        }
        
        // Popular movies suggestions
        html += '<div class="search-section-title"><i class="fas fa-fire"></i> Popul칛ra filmer</div>';
        const popularMovies = movies.slice(0, 4);
        html += popularMovies.map(movie => `
          <div class="search-result-item" data-movie-id="${movie.id}">
            <img src="${movie.image}" alt="${movie.title}">
            <div class="search-result-info">
              <h4>${movie.title}</h4>
              <p>${movie.genre}</p>
            </div>
          </div>
        `).join('');
        
        container.innerHTML = html;
        container.classList.add('active');
        
        // Add click handlers for history items
        container.querySelectorAll('.search-history-item').forEach(item => {
          item.addEventListener('click', (e) => {
            if (!e.target.closest('.remove-history')) {
              const term = item.dataset.term;
              inputElement.value = term;
              const results = searchMovies(term);
              renderResults(results, container, inputElement);
            }
          });
        });
        
        // Add remove history handlers
        container.querySelectorAll('.remove-history').forEach(btn => {
          btn.addEventListener('click', (e) => {
            e.stopPropagation();
            const term = btn.dataset.term;
            let history = getSearchHistory();
            history = history.filter(item => item !== term);
            localStorage.setItem(SEARCH_HISTORY_KEY, JSON.stringify(history));
            renderHistoryAndSuggestions(container, inputElement);
          });
        });
        
        // Add click handlers for movie items
        addMovieClickHandlers(container, inputElement);
      }
      
      // Add click handlers for movie results
      function addMovieClickHandlers(container, inputElement) {
        container.querySelectorAll('.search-result-item').forEach(item => {
          item.addEventListener('click', () => {
            const movieId = item.dataset.movieId;
            const movieElement = document.getElementById(movieId);
            const movieTitle = item.querySelector('h4')?.textContent || '';
            
            if (movieTitle) {
              saveToHistory(movieTitle);
            }
            
            if (movieElement) {
              movieElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
              movieElement.style.animation = 'pulse 0.5s ease 2';
              setTimeout(() => {
                movieElement.style.animation = '';
              }, 1000);
            }
            container.classList.remove('active');
            if (searchInput) searchInput.value = '';
            if (searchInputMobile) searchInputMobile.value = '';
            document.getElementById('menu-toggle').checked = false;
          });
        });
      }
      
      // Render results
      function renderResults(results, container, inputElement) {
        const query = inputElement.value;
        
        if (results.length === 0) {
          container.innerHTML = `
            <div class="search-no-results">
              <i class="fas fa-search"></i> Inga filmer hittades f칬r "${query}"
            </div>
            <div class="search-section-title"><i class="fas fa-lightbulb"></i> Prova dessa</div>
          `;
          const movies = getMovies().slice(0, 3);
          container.innerHTML += movies.map(movie => `
            <div class="search-result-item" data-movie-id="${movie.id}">
              <img src="${movie.image}" alt="${movie.title}">
              <div class="search-result-info">
                <h4>${movie.title}</h4>
                <p>${movie.genre}</p>
              </div>
            </div>
          `).join('');
        } else {
          container.innerHTML = `<div class="search-section-title"><i class="fas fa-film"></i> Resultat (${results.length})</div>`;
          container.innerHTML += results.map(movie => `
            <div class="search-result-item" data-movie-id="${movie.id}">
              <img src="${movie.image}" alt="${movie.title}">
              <div class="search-result-info">
                <h4>${movie.title}</h4>
                <p>${movie.genre}</p>
              </div>
            </div>
          `).join('');
        }
        
        container.classList.add('active');
        addMovieClickHandlers(container, inputElement);
      }
      
      // Desktop search
      if (searchInput && searchResults) {
        searchInput.addEventListener('input', (e) => {
          const query = e.target.value;
          if (query.length >= 1) {
            const results = searchMovies(query);
            renderResults(results, searchResults, searchInput);
          } else {
            renderHistoryAndSuggestions(searchResults, searchInput);
          }
        });
        
        searchInput.addEventListener('focus', () => {
          if (searchInput.value.length >= 1) {
            const results = searchMovies(searchInput.value);
            renderResults(results, searchResults, searchInput);
          } else {
            renderHistoryAndSuggestions(searchResults, searchInput);
          }
        });
        
        // Close on click outside
        document.addEventListener('click', (e) => {
          if (!e.target.closest('.search-box')) {
            searchResults.classList.remove('active');
          }
        });
      }
      
      // Mobile search
      if (searchInputMobile && searchResultsMobile) {
        searchInputMobile.addEventListener('input', (e) => {
          const query = e.target.value;
          if (query.length >= 1) {
            const results = searchMovies(query);
            renderResults(results, searchResultsMobile, searchInputMobile);
          } else {
            renderHistoryAndSuggestions(searchResultsMobile, searchInputMobile);
          }
        });
        
        searchInputMobile.addEventListener('focus', () => {
          if (searchInputMobile.value.length >= 1) {
            const results = searchMovies(searchInputMobile.value);
            renderResults(results, searchResultsMobile, searchInputMobile);
          } else {
            renderHistoryAndSuggestions(searchResultsMobile, searchInputMobile);
          }
        });
      }
    }
    
    // Initialize search
    initSearch();

    // Category filter functionality
    document.querySelectorAll('.category-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');

        const category = btn.dataset.category;
        document.querySelectorAll('.movie-card').forEach(card => {
          if (category === 'all' || card.dataset.category === category) {
            card.style.display = 'block';
          } else {
            card.style.display = 'none';
          }
        });
      });
    });

    // ==========================================
    // STREAMING / PLAYER SYSTEM
    // ==========================================

    const playerModal = document.getElementById('playerModal');

    // Toggle watchlist (add/remove from list)
    function toggleWatchlist(btn) {
      const isAdded = btn.classList.toggle('added');
      if (isAdded) {
        btn.innerHTML = '<i class="fas fa-bookmark"></i> I min lista';
        showToast('Tillagd i din lista!');
      } else {
        btn.innerHTML = '<i class="far fa-bookmark"></i> Min lista';
        showToast('Borttagen fr친n din lista');
      }
    }

    // Open player modal for a movie
    function openPlayer(movieCard) {
      const title = movieCard.querySelector('h3').textContent;
      const image = movieCard.querySelector('.movie-poster img').src;
      const genre = movieCard.querySelector('.movie-genre')?.textContent || '';
      const duration = movieCard.querySelector('.movie-duration')?.textContent || '';
      const rating = movieCard.querySelector('.movie-rating')?.textContent || '';

      document.getElementById('playerMovieImage').src = image;
      document.getElementById('playerMovieTitle').textContent = title;
      document.getElementById('playerMovieGenre').textContent = genre;
      document.getElementById('playerMovieDuration').textContent = duration;
      document.getElementById('playerMovieRating').textContent = rating;

      playerModal.classList.add('active');
      document.body.style.overflow = 'hidden';
    }

    function closePlayerModal() {
      playerModal.classList.remove('active');
      document.body.style.overflow = '';
    }

    // Player modal event listeners
    document.getElementById('closePlayerModal').addEventListener('click', closePlayerModal);
    playerModal.addEventListener('click', (e) => {
      if (e.target === playerModal) closePlayerModal();
    });

    // Click on movie poster to open player
    document.querySelectorAll('.movie-card .movie-poster').forEach(poster => {
      poster.style.cursor = 'pointer';
      poster.addEventListener('click', () => {
        openPlayer(poster.closest('.movie-card'));
      });
    });

    // ==========================================
    // MOVIE RECOMMENDATION SYSTEM
    // ==========================================

    const recommendModal = document.getElementById('recommendModal');
    let userPreferences = {
      mood: '',
      company: '',
      age: '',
      duration: ''
    };

    // Movie database with attributes
    const moviesDB = [
      {
        id: 'movie-once-upon-a-time',
        title: 'Once Upon a Time in Hollywood',
        image: 'images/once-upon-a-time.png',
        genre: 'Drama, Komedi',
        duration: '2h 41min',
        rating: '8.5',
        moods: ['relaxed', 'thoughtful', 'happy'],
        company: ['alone', 'date', 'friends'],
        age: ['adult'],
        length: 'long'
      },
      {
        id: 'movie-tenet',
        title: 'Tenet',
        image: 'images/tenet.jpg',
        genre: 'Action, Sci-Fi',
        duration: '2h 30min',
        rating: '7.8',
        moods: ['excited', 'thoughtful'],
        company: ['alone', 'friends'],
        age: ['teen', 'adult'],
        length: 'long'
      },
      {
        id: 'movie-wonder-woman',
        title: 'Wonder Woman 1984',
        image: 'images/wonderwoman.png',
        genre: 'Action, Fantasy',
        duration: '2h 31min',
        rating: '5.4',
        moods: ['excited', 'happy'],
        company: ['family', 'date', 'friends'],
        age: ['teen', 'adult'],
        length: 'long'
      },
      {
        id: 'movie-judy',
        title: 'Judy',
        image: 'images/judy.png',
        genre: 'Biografi, Drama',
        duration: '1h 58min',
        rating: '6.8',
        moods: ['sad', 'thoughtful'],
        company: ['alone', 'date'],
        age: ['adult'],
        length: 'medium'
      },
      {
        id: 'movie-lady-bird',
        title: 'Lady Bird',
        image: 'images/ladybird.png',
        genre: 'Drama, Komedi',
        duration: '1h 34min',
        rating: '7.4',
        moods: ['happy', 'sad', 'thoughtful'],
        company: ['alone', 'date', 'friends'],
        age: ['teen', 'adult'],
        length: 'short'
      },
      {
        id: 'movie-grand-budapest',
        title: 'The Grand Budapest Hotel',
        image: 'images/pexels-photo-903454.jpeg',
        genre: 'Komedi, Drama',
        duration: '1h 39min',
        rating: '8.1',
        moods: ['happy', 'relaxed'],
        company: ['alone', 'date', 'friends'],
        age: ['teen', 'adult'],
        length: 'short'
      },
      {
        id: 'movie-the-haunting',
        title: 'The Haunting',
        image: 'https://images.pexels.com/photos/5435446/pexels-photo-5435446.jpeg?auto=compress&cs=tinysrgb&w=600',
        genre: 'Skr칛ck, Thriller',
        duration: '1h 52min',
        rating: '7.2',
        moods: ['scared', 'excited'],
        company: ['alone', 'date', 'friends'],
        age: ['adult'],
        length: 'medium'
      },
      {
        id: 'movie-nightmare-realm',
        title: 'Nightmare Realm',
        image: 'https://image.tmdb.org/t/p/w500/9E2y5Q7WlCVNEhP5GiVTjhEhx1o.jpg',
        genre: 'Skr칛ck, Mystery',
        duration: '1h 45min',
        rating: '6.9',
        moods: ['scared', 'excited'],
        company: ['alone', 'friends'],
        age: ['adult'],
        length: 'medium'
      },
      {
        id: 'movie-magic-adventure',
        title: 'The Magic Adventure',
        image: 'https://image.tmdb.org/t/p/w500/kuf6dutpsT0vSVehic3EZIqkOBt.jpg',
        genre: 'Familj, Animerad',
        duration: '1h 35min',
        rating: '7.8',
        moods: ['happy', 'relaxed', 'excited'],
        company: ['family'],
        age: ['child', 'teen'],
        length: 'short'
      },
      {
        id: 'movie-paws-friends',
        title: 'Paws & Friends',
        image: 'https://image.tmdb.org/t/p/w500/8Vt6mWEReuy4Of61Lnj5Xj704m8.jpg',
        genre: 'Familj, Komedi',
        duration: '1h 28min',
        rating: '7.1',
        moods: ['happy', 'relaxed'],
        company: ['family'],
        age: ['child', 'teen'],
        length: 'short'
      },
      {
        id: 'movie-galaxy-frontier',
        title: 'Galaxy Frontier',
        image: 'https://image.tmdb.org/t/p/w500/d5NXSklXo0qyIYkgV94XAgMIckC.jpg',
        genre: 'Sci-Fi, 츿ventyr',
        duration: '2h 15min',
        rating: '8.0',
        moods: ['excited', 'thoughtful'],
        company: ['alone', 'friends', 'date'],
        age: ['teen', 'adult'],
        length: 'long'
      },
      {
        id: 'movie-cyber-world',
        title: 'Cyber World 2077',
        image: 'https://images.pexels.com/photos/3861969/pexels-photo-3861969.jpeg?auto=compress&cs=tinysrgb&w=600',
        genre: 'Sci-Fi, Action',
        duration: '2h 22min',
        rating: '7.6',
        moods: ['excited', 'thoughtful'],
        company: ['alone', 'friends'],
        age: ['teen', 'adult'],
        length: 'long'
      }
    ];

    // Open recommendation modal
    function openRecommendModal() {
      userPreferences = { mood: '', company: '', age: '', duration: '' };
      showRecStep(1);
      recommendModal.classList.add('active');
      document.body.style.overflow = 'hidden';
    }

    // Close recommendation modal
    function closeRecommendModal() {
      recommendModal.classList.remove('active');
      document.body.style.overflow = '';
    }

    // Show specific recommendation step
    function showRecStep(step) {
      document.querySelectorAll('.recommend-step').forEach(s => s.classList.add('hidden'));
      document.getElementById(`recStep${step}`).classList.remove('hidden');
      // Clear selections in current and subsequent steps when navigating
      for (let i = step; i <= 4; i++) {
        const stepEl = document.getElementById(`recStep${i}`);
        if (stepEl) {
          stepEl.querySelectorAll('.recommend-option').forEach(opt => opt.classList.remove('selected'));
        }
      }
    }

    // Calculate movie score based on preferences
    function calculateScore(movie) {
      let score = 0;

      if (movie.moods.includes(userPreferences.mood)) score += 3;
      if (movie.company.includes(userPreferences.company)) score += 2;
      if (movie.age.includes(userPreferences.age)) score += 2;
      if (movie.length === userPreferences.duration) score += 1;

      return score;
    }

    // Get recommendations
    function getRecommendations() {
      const scored = moviesDB.map(movie => ({
        ...movie,
        score: calculateScore(movie)
      }));

      scored.sort((a, b) => b.score - a.score);
      return scored.slice(0, 3);
    }

    // Generate reason text
    function getReasonText() {
      const moodTexts = {
        happy: 'du k칛nner dig glad',
        sad: 'du vill ha n친got k칛nslosamt',
        excited: 'du s칬ker sp칛nning',
        relaxed: 'du vill koppla av',
        scared: 'du vill bli r칛dd',
        thoughtful: 'du vill ha n친got tankev칛ckande'
      };

      const companyTexts = {
        alone: 'ensam',
        date: 'med din dejt',
        family: 'med familjen',
        friends: 'med v칛nner'
      };

      return `Perfekt f칬r dig eftersom ${moodTexts[userPreferences.mood]} och tittar ${companyTexts[userPreferences.company]}!`;
    }

    // Show results
    function showResults() {
      const recommendations = getRecommendations();
      const resultsContainer = document.getElementById('recommendResults');
      const reasonText = document.getElementById('recommendationReason');

      reasonText.textContent = getReasonText();

      resultsContainer.innerHTML = recommendations.map((movie, index) => `
        <div class="recommend-movie ${index === 0 ? 'top-pick' : ''}" data-rec-movie="${movie.id}">
          ${index === 0 ? '<span class="top-pick-badge"><i class="fas fa-trophy"></i> B칛sta valet</span>' : ''}
          <img src="${movie.image}" alt="${movie.title}">
          <div class="recommend-movie-info">
            <h4>${movie.title}</h4>
            <p class="rec-genre"><i class="fas fa-film"></i> ${movie.genre}</p>
            <p class="rec-duration"><i class="fas fa-clock"></i> ${movie.duration}</p>
            <p class="rec-rating"><i class="fas fa-star"></i> ${movie.rating}/10</p>
            <button class="rec-book-btn" onclick="closeRecommendModal(); document.getElementById('${movie.id}').scrollIntoView({behavior: 'smooth'});">
              <i class="fas fa-play"></i> Titta nu
            </button>
          </div>
        </div>
      `).join('');

      // Add click-to-select on recommendation results
      resultsContainer.querySelectorAll('.recommend-movie').forEach(card => {
        card.addEventListener('click', function(e) {
          if (e.target.closest('.rec-book-btn')) return;
          resultsContainer.querySelectorAll('.recommend-movie').forEach(m => {
            m.classList.remove('top-pick');
            const badge = m.querySelector('.top-pick-badge');
            if (badge) badge.remove();
          });
          this.classList.add('top-pick');
          if (!this.querySelector('.top-pick-badge')) {
            const badge = document.createElement('span');
            badge.className = 'top-pick-badge';
            badge.innerHTML = '<i class="fas fa-trophy"></i> B칛sta valet';
            this.insertBefore(badge, this.firstChild);
          }
        });
      });

      showRecStep(5);
    }

    // Event listeners for recommendation modal
    document.getElementById('openRecommendBtn').addEventListener('click', openRecommendModal);
    document.getElementById('openRecommendMobile').addEventListener('click', (e) => {
      e.preventDefault();
      document.getElementById('menu-toggle').checked = false;
      openRecommendModal();
    });
    document.getElementById('closeRecommendModal').addEventListener('click', closeRecommendModal);
    document.getElementById('restartRecommend').addEventListener('click', () => {
      userPreferences = { mood: '', company: '', age: '', duration: '' };
      // Clear all selected states from all steps
      document.querySelectorAll('.recommend-option').forEach(opt => opt.classList.remove('selected'));
      showRecStep(1);
    });

    // Close on overlay click
    recommendModal.addEventListener('click', (e) => {
      if (e.target === recommendModal) closeRecommendModal();
    });

    // Handle option clicks
    document.querySelectorAll('.recommend-option').forEach(option => {
      option.addEventListener('click', function() {
        const step = this.closest('.recommend-step');
        const stepId = step.id;
        const value = this.dataset.value;

        // Visual feedback
        step.querySelectorAll('.recommend-option').forEach(opt => opt.classList.remove('selected'));
        this.classList.add('selected');

        // Save preference and go to next step
        setTimeout(() => {
          if (stepId === 'recStep1') {
            userPreferences.mood = value;
            showRecStep(2);
          } else if (stepId === 'recStep2') {
            userPreferences.company = value;
            showRecStep(3);
          } else if (stepId === 'recStep3') {
            userPreferences.age = value;
            showRecStep(4);
          } else if (stepId === 'recStep4') {
            userPreferences.duration = value;
            showResults();
          }
        }, 300);
      });
    });

    // Back buttons
    document.querySelectorAll('.rec-back-btn').forEach(btn => {
      btn.addEventListener('click', function() {
        const step = parseInt(this.dataset.step);
        showRecStep(step);
      });
    });

    // ==========================================

    // P칀MINN MIG (REMIND ME) FUNCTIONALITY
    // ==========================================
    const remindModal = document.getElementById('remindModal');
    let currentRemindMovie = '';

    document.querySelectorAll('.notify-btn').forEach(btn => {
      btn.addEventListener('click', function() {
        const card = this.closest('.coming-card');
        currentRemindMovie = card.querySelector('h3').textContent;
        document.getElementById('remindMovieTitle').textContent = currentRemindMovie;
        document.getElementById('remindSuccess').classList.add('hidden');
        document.getElementById('remindForm').classList.remove('hidden');
        document.getElementById('remindForm').reset();
        remindModal.classList.add('active');
        document.body.style.overflow = 'hidden';
      });
    });

    document.getElementById('closeRemindModal').addEventListener('click', () => {
      remindModal.classList.remove('active');
      document.body.style.overflow = '';
    });

    remindModal.addEventListener('click', (e) => {
      if (e.target === remindModal) {
        remindModal.classList.remove('active');
        document.body.style.overflow = '';
      }
    });

    document.getElementById('remindForm').addEventListener('submit', (e) => {
      e.preventDefault();
      document.getElementById('remindForm').classList.add('hidden');
      document.getElementById('remindSuccess').classList.remove('hidden');
      setTimeout(() => {
        remindModal.classList.remove('active');
        document.body.style.overflow = '';
      }, 2500);
    });

    // ==========================================
    // PRESENT KORT (GIFT CARD) FUNCTIONALITY
    // ==========================================
    let selectedGiftAmount = 500;
    const giftcardModal = document.getElementById('giftcardModal');

    // Amount selection updates card preview
    document.querySelectorAll('.amount-btn').forEach(btn => {
      btn.addEventListener('click', function() {
        document.querySelectorAll('.amount-btn').forEach(b => b.classList.remove('active'));
        this.classList.add('active');
        const amount = parseInt(this.textContent);
        selectedGiftAmount = amount;
        document.querySelector('.giftcard-value').textContent = amount + ' kr';
      });
    });

    // Open gift card purchase modal
    document.querySelector('.giftcard-buy').addEventListener('click', () => {
      document.getElementById('modalGiftcardValue').textContent = selectedGiftAmount + ' kr';
      document.getElementById('giftcardTotal').textContent = selectedGiftAmount;
      document.getElementById('giftcardSuccess').classList.add('hidden');
      document.getElementById('giftcardPurchaseForm').classList.remove('hidden');
      document.getElementById('giftcardPurchaseForm').reset();
      giftcardModal.classList.add('active');
      document.body.style.overflow = 'hidden';
    });

    document.getElementById('closeGiftcardModal').addEventListener('click', () => {
      giftcardModal.classList.remove('active');
      document.body.style.overflow = '';
    });

    giftcardModal.addEventListener('click', (e) => {
      if (e.target === giftcardModal) {
        giftcardModal.classList.remove('active');
        document.body.style.overflow = '';
      }
    });

    // Delivery option changes total
    document.querySelectorAll('input[name="delivery"]').forEach(radio => {
      radio.addEventListener('change', function() {
        const extra = this.value === 'physical' ? 29 : 0;
        document.getElementById('giftcardTotal').textContent = selectedGiftAmount + extra;
      });
    });

    document.getElementById('giftcardPurchaseForm').addEventListener('submit', (e) => {
      e.preventDefault();
      const code = 'GC-' + Date.now().toString().slice(-6);
      document.getElementById('giftcardCode').textContent = code;
      document.getElementById('giftcardPurchaseForm').classList.add('hidden');
      document.getElementById('giftcardSuccess').classList.remove('hidden');
    });

    // ==========================================


    // PROFILE MODAL
    // ==========================================
    const profileModal = document.getElementById('profileModal');

    function openProfileModal() {
      profileModal.classList.add('active');
      document.body.style.overflow = 'hidden';
      generateQRCode();
    }

    function closeProfileModal() {
      profileModal.classList.remove('active');
      document.body.style.overflow = '';
    }

    document.getElementById('openProfileBtn').addEventListener('click', openProfileModal);
    document.getElementById('openProfileMobile').addEventListener('click', (e) => {
      e.preventDefault();
      document.getElementById('menu-toggle').checked = false;
      openProfileModal();
    });
    document.getElementById('closeProfileModal').addEventListener('click', closeProfileModal);
    profileModal.addEventListener('click', (e) => {
      if (e.target === profileModal) closeProfileModal();
    });

    // Profile tabs
    document.querySelectorAll('.profile-tab').forEach(tab => {
      tab.addEventListener('click', function() {
        document.querySelectorAll('.profile-tab').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.profile-tab-content').forEach(c => c.classList.remove('active'));
        this.classList.add('active');

        const tabId = 'tab' + this.dataset.tab.charAt(0).toUpperCase() + this.dataset.tab.slice(1);
        document.getElementById(tabId).classList.add('active');
      });
    });

    // Save profile handlers
    document.getElementById('saveProfileInfo').addEventListener('click', () => {
      alert('Profil sparad!');
    });
    document.getElementById('saveProfileAddress').addEventListener('click', () => {
      alert('Adress sparad!');
    });

    // QR Code generation using canvas
    function generateQRCode() {
      const container = document.getElementById('profileQR');
      if (container.querySelector('canvas')) return;

      const memberId = 'DB-2024-0042';
      const data = memberId;
      const canvas = document.createElement('canvas');
      const size = 160;
      canvas.width = size;
      canvas.height = size;
      const ctx = canvas.getContext('2d');

      // Simple QR-code-like pattern based on data hash
      const cellSize = 8;
      const gridSize = size / cellSize;

      // Generate deterministic pattern from data
      let hash = 0;
      for (let i = 0; i < data.length; i++) {
        hash = ((hash << 5) - hash) + data.charCodeAt(i);
        hash = hash & hash;
      }

        document.getElementById('tab-' + this.dataset.tab).classList.add('active');
      });
    });

    // Generate QR code on canvas
    function generateQRCode() {
      const canvas = document.getElementById('profileQR');
      if (!canvas) return;
      const ctx = canvas.getContext('2d');
      const size = 120;
      const cellSize = 4;
      const cells = Math.floor(size / cellSize);


      ctx.fillStyle = '#ffffff';
      ctx.fillRect(0, 0, size, size);
      ctx.fillStyle = '#111111';


      // Draw finder patterns (top-left, top-right, bottom-left)

      // Generate deterministic QR-like pattern
      const seed = 2024847;
      function pseudoRandom(n) {
        let x = Math.sin(seed + n) * 10000;
        return x - Math.floor(x);
      }

      // Draw finder patterns (corners)

      function drawFinder(x, y) {
        ctx.fillRect(x, y, 7 * cellSize, cellSize);
        ctx.fillRect(x, y + 6 * cellSize, 7 * cellSize, cellSize);
        ctx.fillRect(x, y, cellSize, 7 * cellSize);
        ctx.fillRect(x + 6 * cellSize, y, cellSize, 7 * cellSize);
        ctx.fillRect(x + 2 * cellSize, y + 2 * cellSize, 3 * cellSize, 3 * cellSize);
      }

      drawFinder(0, 0);

      drawFinder((gridSize - 7) * cellSize, 0);
      drawFinder(0, (gridSize - 7) * cellSize);

      // Fill data area with deterministic pattern
      let seed = Math.abs(hash);
      for (let y = 0; y < gridSize; y++) {
        for (let x = 0; x < gridSize; x++) {
          // Skip finder pattern areas
          if ((x < 8 && y < 8) || (x >= gridSize - 8 && y < 8) || (x < 8 && y >= gridSize - 8)) continue;
          seed = (seed * 1103515245 + 12345) & 0x7fffffff;
          if (seed % 3 !== 0) {
            ctx.fillRect(x * cellSize, y * cellSize, cellSize, cellSize);
          }
        }
      }

      container.appendChild(canvas);
    }

    // ==========================================
    // ERBJUDANDEN DETAIL MODALS
    // ==========================================
    document.querySelectorAll('.special-btn').forEach(btn => {
      btn.addEventListener('click', function() {
        const card = this.closest('.special-card');
        const title = card.querySelector('h3').textContent;
        const price = card.querySelector('.special-price').textContent;
        const desc = card.querySelector('p:not(.special-price)').textContent;

        const details = {
          'Familjes칬ndag': 'Varje s칬ndag bjuder Din Bio p친 en fantastisk familjeupplevelse! Paketet inkluderar:\n\n Biobiljett f칬r hela familjen\n Medium popcorn per person\n Valfri l칛sk (33cl)\n Tillg친ng till barnh칬rnan f칬re filmen\n\nErbjudandet g칛ller alla s칬ndagens visningar. Max 6 personer per familj. Kan inte kombineras med andra erbjudanden.',
          'VIP-upplevelse': 'Upplev bio som aldrig f칬rr med v친r VIP-upplevelse!\n\n Exklusiv lounge med gratis drycker f칬re filmen\n Premium-platser i mitten av salongen\n Stort popcorn & valfri dryck ing친r\n Mjuka l칛derrecliner-f친t칬ljer\n Servering till din plats\n\nPerfekt f칬r en lyxig kv칛ll ut. Boka senast 24 timmar i f칬rv칛g.',
          'Studentrabatt': 'Som student f친r du rabatterade biljetter hos Din Bio!\n\n Giltigt med studentkort (CSN, Mecenat, studentlegitimation)\n G칛ller vardagar f칬re kl. 17:00\n Alla filmer och salonger inkluderade\n Kan kombineras med storlek-uppgradering av popcorn\n\nOBS: G칛ller ej premi칛rvisningar eller specialevenemang.',
          'Date Night': 'Perfekt paket f칬r en romantisk kv칛ll p친 bio!\n\n 2 biobiljetter sida vid sida\n Stort popcorn att dela\n 2 valfria drycker\n Reserverade platser i de b칛sta raderna\n\nG칛ller varje fredag. Boka via appen eller hemsidan senast samma dag kl. 15:00.'
        };

        alert(title + ' - ' + price + '\n\n' + (details[title] || desc));
      });
    });

      drawFinder(size - 7 * cellSize, 0);
      drawFinder(0, size - 7 * cellSize);

      // Random data modules
      for (let i = 8; i < cells - 8; i++) {
        for (let j = 8; j < cells - 8; j++) {
          if (pseudoRandom(i * cells + j) > 0.5) {
            ctx.fillRect(i * cellSize, j * cellSize, cellSize, cellSize);
          }
        }
      }
    }

    // ==========================================
    // P칀MINN MIG (REMIND ME) FEATURE
    // ==========================================
    const reminders = new Set();

    document.querySelectorAll('.notify-btn').forEach(btn => {
      btn.addEventListener('click', function() {
        const card = this.closest('.coming-card');
        const movieTitle = card.querySelector('h3').textContent;

        if (reminders.has(movieTitle)) {
          reminders.delete(movieTitle);
          this.innerHTML = '<i class="fas fa-bell"></i> P친minn mig';
          this.classList.remove('reminded');
          showToast(`P친minnelse borttagen f칬r ${movieTitle}`);
        } else {
          reminders.add(movieTitle);
          this.innerHTML = '<i class="fas fa-bell-slash"></i> P친minnelse satt';
          this.classList.add('reminded');
          showToast(`Du blir p친mind om ${movieTitle}!`);
        }
      });
    });

    function showToast(message) {
      const toast = document.getElementById('reminderToast');
      document.getElementById('toastMessage').textContent = message;
      toast.classList.add('active');
      setTimeout(() => {
        toast.classList.remove('active');
      }, 3000);
    }

    // ==========================================
    // GIFT CARD PURCHASE SYSTEM
    // ==========================================
    const giftcardModal = document.getElementById('giftcardModal');
    let selectedGCAmount = 500;

    function openGiftcardModal() {
      giftcardModal.classList.add('active');
      document.body.style.overflow = 'hidden';
      showGCStep(1);
    }

    function closeGiftcardModal() {
      giftcardModal.classList.remove('active');
      document.body.style.overflow = '';
    }

    function showGCStep(step) {
      giftcardModal.querySelectorAll('.modal-step').forEach(s => s.classList.add('hidden'));
      document.getElementById(`giftcardStep${step}`).classList.remove('hidden');
    }

    // Gift card buy button in main section
    document.querySelector('.giftcard-buy').addEventListener('click', openGiftcardModal);

    document.getElementById('closeGiftcardModal').addEventListener('click', closeGiftcardModal);
    document.getElementById('closeGiftcardConfirm').addEventListener('click', closeGiftcardModal);
    giftcardModal.addEventListener('click', (e) => {
      if (e.target === giftcardModal) closeGiftcardModal();
    });

    // Amount selection in purchase modal
    document.querySelectorAll('.gc-amount-option').forEach(btn => {
      btn.addEventListener('click', function() {
        document.querySelectorAll('.gc-amount-option').forEach(b => b.classList.remove('active'));
        this.classList.add('active');
        selectedGCAmount = parseInt(this.dataset.amount);
        document.getElementById('gcPreviewAmount').textContent = selectedGCAmount + ' kr';
      });
    });

    // Also sync the main section amount buttons with the modal
    document.querySelectorAll('.amount-btn').forEach(btn => {
      btn.addEventListener('click', function() {
        document.querySelectorAll('.amount-btn').forEach(b => b.classList.remove('active'));
        this.classList.add('active');
        const amount = parseInt(this.textContent);
        selectedGCAmount = amount;
        document.querySelector('.giftcard-value').textContent = amount + ' kr';
        // Also update modal if open
        document.querySelectorAll('.gc-amount-option').forEach(b => {
          b.classList.toggle('active', parseInt(b.dataset.amount) === amount);
        });
        document.getElementById('gcPreviewAmount').textContent = amount + ' kr';
      });
    });

    document.getElementById('gcToPay').addEventListener('click', function() {
      const email = document.getElementById('gcRecipientEmail').value;
      if (!email) {
        alert('V칛nligen fyll i mottagarens e-post');
        return;
      }
      document.getElementById('gcSummaryAmount').textContent = selectedGCAmount + ' kr';
      document.getElementById('gcSummaryRecipient').textContent = email;
      document.getElementById('gcSummaryTotal').textContent = selectedGCAmount;
      showGCStep(2);
    });

    document.getElementById('gcBackToStep1').addEventListener('click', () => showGCStep(1));

    document.getElementById('gcPayBtn').addEventListener('click', function() {
      const code = 'DIN-BIO-' + Math.floor(1000 + Math.random() * 9000);
      document.getElementById('gcConfirmCode').textContent = code;
      showGCStep(3);
    });

    // Format card number in gift card modal
    document.getElementById('gcCardNumber').addEventListener('input', (e) => {
      let value = e.target.value.replace(/\s/g, '').replace(/\D/g, '');
      let formatted = value.match(/.{1,4}/g)?.join(' ') || value;
      e.target.value = formatted;
    });

    document.getElementById('gcExpiry').addEventListener('input', (e) => {
      let value = e.target.value.replace(/\D/g, '');
      if (value.length >= 2) {
        value = value.slice(0, 2) + '/' + value.slice(2);
      }
      e.target.value = value;
    });

    // ==========================================
    // OFFER DETAIL MODAL
    // ==========================================
    const offerDetailModal = document.getElementById('offerDetailModal');

    const offerDetails = {
      basic: {
        title: 'Basic',
        icon: 'fa-play',
        content: `
          <div class="offer-detail-price">89 kr/m친n</div>
          <p>Perfekt f칬r att komma ig친ng med Din Bio. Streama filmer i HD-kvalitet p친 en enhet i taget.</p>
          <h4>Vad ing친r:</h4>
          <ul>
            <li><i class="fas fa-check"></i> Obegr칛nsat antal filmer</li>
            <li><i class="fas fa-check"></i> HD-kvalitet (720p)</li>
            <li><i class="fas fa-check"></i> 1 enhet samtidigt</li>
            <li><i class="fas fa-check"></i> Avbryt n칛r som helst</li>
          </ul>
          <h4>Villkor:</h4>
          <ul>
            <li><i class="fas fa-info-circle"></i> Ingen bindningstid</li>
            <li><i class="fas fa-info-circle"></i> Betalning m친nadsvis</li>
            <li><i class="fas fa-info-circle"></i> Uppgradera n칛r du vill</li>
          </ul>
          <button class="special-btn" style="width:100%;margin-top:16px;" onclick="closeOfferDetail(); alert('V칛lkommen! Ditt Basic-abonnemang 칛r aktiverat.');">
            <i class="fas fa-play"></i> Starta Basic
          </button>
        `
      },
      standard: {
        title: 'Standard',
        icon: 'fa-star',
        content: `
          <div class="offer-detail-price">139 kr/m친n</div>
          <p>V친r mest popul칛ra plan! Full HD-kvalitet och m칬jlighet att streama p친 tv친 enheter samtidigt.</p>
          <h4>Vad ing친r:</h4>
          <ul>
            <li><i class="fas fa-check"></i> Obegr칛nsat antal filmer</li>
            <li><i class="fas fa-check"></i> Full HD-kvalitet (1080p)</li>
            <li><i class="fas fa-check"></i> 2 enheter samtidigt</li>
            <li><i class="fas fa-check"></i> Ladda ner filmer f칬r offline-visning</li>
            <li><i class="fas fa-check"></i> Avbryt n칛r som helst</li>
          </ul>
          <h4>Villkor:</h4>
          <ul>
            <li><i class="fas fa-info-circle"></i> Ingen bindningstid</li>
            <li><i class="fas fa-info-circle"></i> Betalning m친nadsvis</li>
            <li><i class="fas fa-info-circle"></i> Upp- eller nedgradera n칛r du vill</li>
          </ul>
          <button class="special-btn" style="width:100%;margin-top:16px;" onclick="closeOfferDetail(); alert('V칛lkommen! Ditt Standard-abonnemang 칛r aktiverat.');">
            <i class="fas fa-star"></i> Starta Standard
          </button>
        `
      },
      premium: {
        title: 'Premium',
        icon: 'fa-gem',
        content: `
          <div class="offer-detail-price">189 kr/m친n</div>
          <p>Den ultimata streamingupplevelsen. 4K Ultra HD, Dolby Atmos-ljud och streaming p친 upp till 4 enheter.</p>
          <h4>Vad ing친r:</h4>
          <ul>
            <li><i class="fas fa-check"></i> Obegr칛nsat antal filmer</li>
            <li><i class="fas fa-check"></i> 4K Ultra HD + HDR</li>
            <li><i class="fas fa-check"></i> Dolby Atmos-ljud</li>
            <li><i class="fas fa-check"></i> 4 enheter samtidigt</li>
            <li><i class="fas fa-check"></i> Ladda ner filmer f칬r offline-visning</li>
            <li><i class="fas fa-check"></i> Exklusivt inneh친ll och premi칛rer</li>
          </ul>
          <h4>Villkor:</h4>
          <ul>
            <li><i class="fas fa-info-circle"></i> Ingen bindningstid</li>
            <li><i class="fas fa-info-circle"></i> Betalning m친nadsvis</li>
            <li><i class="fas fa-info-circle"></i> Upp- eller nedgradera n칛r du vill</li>
          </ul>
          <button class="special-btn" style="width:100%;margin-top:16px;" onclick="closeOfferDetail(); alert('V칛lkommen! Ditt Premium-abonnemang 칛r aktiverat.');">
            <i class="fas fa-gem"></i> Starta Premium
          </button>
        `
      }
    };

    function showOfferDetail(offerId) {
      const offer = offerDetails[offerId];
      if (!offer) return;
      document.getElementById('offerDetailTitle').textContent = offer.title;
      document.querySelector('#offerDetailHeader .offer-detail-icon i').className = 'fas ' + offer.icon;
      document.getElementById('offerDetailBody').innerHTML = offer.content;
      offerDetailModal.classList.add('active');
      document.body.style.overflow = 'hidden';
    }

    function closeOfferDetail() {
      offerDetailModal.classList.remove('active');
      document.body.style.overflow = '';
    }

    document.getElementById('closeOfferModal').addEventListener('click', closeOfferDetail);
    offerDetailModal.addEventListener('click', (e) => {
      if (e.target === offerDetailModal) closeOfferDetail();
    });

  </script>

</body>
</html>
